"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[610],{6610:(e,t,i)=>{i.d(t,{T:()=>d,i:()=>l});var r=i(8546);let n="1a6iGXkroz1IeH3O2DNrHi1UqnoCfX6N37eDRtWuySbs",a="AIzaSyA9cwF3iD_dAVqJOtz7NZIhDmAxFqeGAKw",s="robeson_resources_cache_v10";function o(){try{let e=localStorage.getItem(s);if(!e)return null;let t=JSON.parse(e);if(Date.now()-t.timestamp<36e5)return console.log("Using cached data"),t.organizations;return localStorage.removeItem(s),null}catch(e){return console.error("Error reading cache:",e),null}}function c(e){try{let t={organizations:e,timestamp:Date.now()};localStorage.setItem(s,JSON.stringify(t))}catch(e){console.error("Error setting cache:",e)}}async function l(){let e=o();if(e)return e;try{if(!n||!a)return console.warn("Google Sheets credentials not found, falling back to CSV"),u();console.log("Fetching fresh data from Google Sheets...");let e="https://sheets.googleapis.com/v4/spreadsheets/".concat(n,"/values/").concat("Sheet1!A:N","?key=").concat(a),t=new AbortController,i=setTimeout(()=>t.abort(),1e4),r=await fetch(e,{signal:t.signal,headers:{Accept:"application/json"}});if(clearTimeout(i),!r.ok){let e=await r.text();throw console.error("Google Sheets API error:",e),Error("Failed to fetch data: ".concat(r.statusText))}let s=(await r.json()).values;if(!s||0===s.length)return console.warn("No data found in Google Sheet"),[];console.log("Successfully fetched ".concat(s.length," rows from Google Sheets"));let o=s.slice(1).map((e,t)=>{var i;return{id:(t+1).toString(),organizationName:e[0]||"",category:e[1]||"",serviceType:e[2]||"",address:e[3]||"",phone:e[4]||"",email:e[5]||"",website:e[6]||"",hours:e[7]||"",servicesOffered:e[8]||"",costPayment:e[9]||"",description:e[10]||"",crisisService:(null==(i=e[11])?void 0:i.toLowerCase())==="yes",languages:e[12]||"",specialNotes:e[13]||""}});return c(o),o}catch(e){if(console.error("Error loading organizations from Google Sheets:",e),e instanceof Error&&"AbortError"===e.name){let e=o();if(e)return e}return u()}}async function u(){let e=o();if(e)return e;try{console.log("Loading data from CSV file...");let{withBasePath:e}=await i.e(512).then(i.bind(i,2512)),r=await fetch(e("/consolidated_robeson_migrated.csv")),n=(await r.text()).split("\n").filter(e=>e.trim()),a=[];for(let e=1;e<n.length;e++){let i=function(e){let t=[],i="",r=!1;for(let n=0;n<e.length;n++){let a=e[n];'"'===a?r&&'"'===e[n+1]?(i+='"',n++):r=!r:","!==a||r?i+=a:(t.push(i.trim()),i="")}return t.push(i.trim()),t}(n[e]);if(i.length>=14){var t;let r={id:e.toString(),organizationName:i[0]||"",category:i[1]||"",serviceType:i[2]||"",address:i[3]||"",phone:i[4]||"",email:i[5]||"",website:i[6]||"",hours:i[7]||"",servicesOffered:i[8]||"",costPayment:i[9]||"",description:i[10]||"",crisisService:(null==(t=i[11])?void 0:t.toLowerCase())==="yes",languages:i[12]||"",specialNotes:i[13]||""};a.push(r)}else console.warn("Skipping line ".concat(e+1,": insufficient columns (").concat(i.length," found, 14 required)"))}return console.log("Successfully loaded ".concat(a.length," organizations from CSV")),c(a),a}catch(e){return console.error("Error loading organizations from CSV:",e),[]}}function d(e,t,i,n){let a=[...e];if(t&&"All"!==t&&(a="Crisis Services"===t?a.filter(e=>e.crisisService):"Food Services"===t?a.filter(e=>{let t=e.servicesOffered.toLowerCase(),i=e.organizationName.toLowerCase();return!(e.serviceType.toLowerCase().includes("support group")||i.includes("anonymous")||i.includes("al-anon"))&&(t.includes("food")||t.includes("meal")||t.includes("pantry")||t.includes("kitchen")||t.includes("nutrition")||t.includes("feeding")||i.includes("food bank")||i.includes("soup kitchen"))}):"Healthcare Services"===t?a.filter(e=>!e.serviceType.toLowerCase().includes("support group")&&(e.category===t||!!e.crisisService&&"Crisis Services"===e.category&&["Hospital/Medical Services","Healthcare","Medical Services","Comprehensive Health Services","Integrated Healthcare","Public Health Services"].includes(e.serviceType))):a.filter(e=>e.category===t||!!e.crisisService&&"Crisis Services"===e.category&&({"Police Services":"Law Enforcement","Sheriff Services":"Law Enforcement","Mental Health Services":"Mental Health & Substance Use","Substance Abuse Treatment":"Mental Health & Substance Use","Mental Health/Addiction":"Mental Health & Substance Use","Mental Health/Developmental Services":"Mental Health & Substance Use","Mental Health/Substance Abuse":"Mental Health & Substance Use","Addiction Medicine":"Mental Health & Substance Use","Behavioral Health/Medical":"Mental Health & Substance Use","Behavioral Health/Peer Support":"Mental Health & Substance Use","Opioid Treatment":"Mental Health & Substance Use","Opioid Recovery":"Mental Health & Substance Use","Substance Abuse Prevention/Recovery":"Mental Health & Substance Use","Substance Use Prevention/Recovery":"Mental Health & Substance Use","Youth Substance Abuse Prevention":"Mental Health & Substance Use","Therapeutic Foster Care/Behavioral Health":"Mental Health & Substance Use",Healthcare:"Healthcare Services","Medical Services":"Healthcare Services","Hospital/Medical Services":"Healthcare Services","Comprehensive Health Services":"Healthcare Services","Integrated Healthcare":"Healthcare Services","Public Health Services":"Healthcare Services","Tribal Services":"Tribal Services","Municipal Services":"Government Services","Social Services":"Government Services","Legal Services":"Legal Services","Legal/Prosecution":"Legal Services","Drug Court":"Legal Services","Child Advocacy":"Legal Services","Support Services":"Community Services","Community Services":"Community Services","Crisis Services":"Community Services","Support Group":"Community Services","Harm Reduction":"Community Services","Mobile Harm Reduction":"Community Services","Biopsychosocial Support":"Community Services","Community Resilience":"Community Services","Disaster Recovery":"Community Services","Disaster Relief/Humanitarian":"Community Services","Healing/Educational Resources":"Community Services","Inclusive Community Support":"Community Services","Opioid Crisis Prevention":"Community Services","Offender Rehabilitation":"Community Services","Resource Gap Bridging":"Community Services","Equine-Assisted Learning":"Community Services","Faith-Based Services":"Faith-Based Services","Faith-Based Recovery":"Faith-Based Services"})[e.serviceType]===t)),i&&!n){let e=i.toLowerCase();a=a.filter(t=>t.organizationName.toLowerCase().includes(e)||t.servicesOffered.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)||t.address.toLowerCase().includes(e))}return n?(a=a.map(e=>{let t=(0,r.Of)(e.address);if(t){let i=(0,r.gd)(n.lat,n.lon,t.lat,t.lon);return{...e,distance:i}}return e})).sort((e,t)=>void 0===e.distance?1:void 0===t.distance?-1:e.distance-t.distance):a.sort((e,t)=>e.crisisService&&!t.crisisService?-1:!e.crisisService&&t.crisisService?1:0),"Crisis Services"===t&&a.sort((e,t)=>{let i=e=>{let t=e.organizationName.toLowerCase();return t.includes("suicide prevention")||"suicide prevention hotline"===t?1:t.includes("crisis text line")?2:t.includes("crisis intervention")?3:t.includes("unc health southeastern")?4:t.includes("sheriff")?5:t.includes("police department")?20:t.includes("domestic violence")?6:t.includes("sexual assault")?7:t.includes("southeastern integrated care")?8:t.includes("life net services")?9:t.includes("monarch")?10:t.includes("carter clinic")?11:t.includes("lumberton treatment center")?12:t.includes("harm reduction")?13:t.includes("breeches buoy")?14:t.includes("tae's pathway")?15:t.includes("stop the pain")?16:t.includes("hope alive")?17:t.includes("christian recovery")?18:19},r=i(e),n=i(t);return r===n?void 0!==e.distance&&void 0!==t.distance?e.distance-t.distance:0:r-n}),a}},8546:(e,t,i)=>{function r(e,t,i,r){let a=n(i-e),s=n(r-t),o=Math.sin(a/2)*Math.sin(a/2)+Math.cos(n(e))*Math.cos(n(i))*Math.sin(s/2)*Math.sin(s/2);return 2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))*3959}function n(e){return Math.PI/180*e}i.d(t,{BO:()=>l,JE:()=>o,Of:()=>c,gd:()=>r,nr:()=>a});let a={pembroke:{lat:34.6807,lon:-79.1953},uncp:{lat:34.6874,lon:-79.2025},lumberton:{lat:34.6182,lon:-79.0086},fairmont:{lat:34.496,lon:-79.1142},maxton:{lat:34.7352,lon:-79.3489},"red springs":{lat:34.8152,lon:-79.1831},"st. pauls":{lat:34.8068,lon:-78.9728},"st pauls":{lat:34.8068,lon:-78.9728},rowland:{lat:34.5368,lon:-79.2917},parkton:{lat:34.9018,lon:-79.0117},shannon:{lat:34.893,lon:-79.1176},orrum:{lat:34.4652,lon:-79.0097},fayetteville:{lat:35.0527,lon:-78.8784},raeford:{lat:34.9777,lon:-79.2242},laurinburg:{lat:34.7741,lon:-79.4628},default:{lat:34.6293,lon:-79.1148}},s=new Map;function o(){s.clear()}function c(e){let t=e.toLowerCase();if(!e||""===e.trim())return null;let i=null;for(let[e,r]of Object.entries(a))if("default"!==e&&t.includes(e)){i={...r};break}!i&&(t.includes("university of north carolina")||t.includes("uncp"))&&(i={...a.uncp}),i||(i={...a.default});let r="".concat(i.lat,",").concat(i.lon),n=s.get(r)||0;if(s.set(r,n+1),n>0){let e=137.5077640500378*n*Math.PI/180,t=.008*Math.sqrt(n),r=(Math.random()-.5)*1e-4,a=(Math.random()-.5)*1e-4;if(i.lat+=(t+a)*Math.cos(e+r),i.lon+=(t+a)*Math.sin(e+r),n>20){let t=.002*Math.floor(n/20);i.lat+=t*Math.cos(e),i.lon+=t*Math.sin(e)}}return i}function l(e){return e<.1?"Less than 0.1 miles":e<1?"".concat(e.toFixed(1)," miles"):"".concat(Math.round(e)," miles")}}}]);