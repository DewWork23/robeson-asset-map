"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[136],{255:(e,n,t)=>{function o(e){let{moduleIds:n}=e;return null}Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"PreloadChunks",{enumerable:!0,get:function(){return o}}),t(5155),t(7650),t(5744),t(589)},2146:(e,n,t)=>{function o(e){let{reason:n,children:t}=e;return t}Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"BailoutToCSR",{enumerable:!0,get:function(){return o}}),t(5262)},3395:(e,n,t)=>{t.d(n,{C:()=>o});let o={"Crisis Services":"\uD83C\uDD98","Food Services":"\uD83C\uDF7D️","Housing Services":"\uD83C\uDFE0","Healthcare Services":"\uD83C\uDFE5","Mental Health & Substance Use":"\uD83E\uDDE0","Government Services":"\uD83C\uDFDB️","Tribal Services":"\uD83E\uDEB6","Community Services":"\uD83C\uDFD8️","Community Groups & Development":"\uD83D\uDC65","Faith-Based Services":"⛪","Legal Services":"⚖️","Law Enforcement":"\uD83D\uDE93",Education:"\uD83D\uDCDA",Pharmacy:"\uD83D\uDC8A","Cultural & Information Services":"\uD83C\uDFAD"}},4054:(e,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),!function(e,n){for(var t in n)Object.defineProperty(e,t,{enumerable:!0,get:n[t]})}(n,{bindSnapshot:function(){return l},createAsyncLocalStorage:function(){return a},createSnapshot:function(){return i}});let t=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class o{disable(){throw t}getStore(){}run(){throw t}exit(){throw t}enterWith(){throw t}static bind(e){return e}}let r="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function a(){return r?new r:new o}function l(e){return r?r.bind(e):o.bind(e)}function i(){return r?r.snapshot():function(e,...n){return e(...n)}}},5744:(e,n,t)=>{Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"workAsyncStorage",{enumerable:!0,get:function(){return o.workAsyncStorageInstance}});let o=t(7828)},6645:(e,n,t)=>{Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r}});let o=t(8229)._(t(7357));function r(e,n){var t;let r={};"function"==typeof e&&(r.loader=e);let a={...r,...n};return(0,o.default)({...a,modules:null==(t=a.loadableGenerated)?void 0:t.modules})}("function"==typeof n.default||"object"==typeof n.default&&null!==n.default)&&void 0===n.default.__esModule&&(Object.defineProperty(n.default,"__esModule",{value:!0}),Object.assign(n.default,n),e.exports=n.default)},7136:(e,n,t)=>{t.d(n,{A:()=>u});var o=t(5155),r=t(2115),a=t(3395),l=t(8546);let i=[[35.04,-79.46],[35.04,-79.35],[35.035,-79.25],[35.03,-79.15],[35.025,-79.05],[35.02,-78.95],[35.015,-78.85],[35.01,-78.75],[34.95,-78.75],[34.9,-78.76],[34.85,-78.77],[34.8,-78.78],[34.75,-78.79],[34.7,-78.8],[34.65,-78.81],[34.6,-78.82],[34.55,-78.83],[34.5,-78.84],[34.45,-78.85],[34.4,-78.86],[34.4,-78.95],[34.405,-79.05],[34.41,-79.15],[34.415,-79.25],[34.42,-79.35],[34.425,-79.45],[34.45,-79.45],[34.5,-79.455],[34.55,-79.46],[34.6,-79.465],[34.65,-79.47],[34.7,-79.475],[34.75,-79.48],[34.8,-79.485],[34.85,-79.49],[34.9,-79.495],[34.95,-79.5],[35,-79.5],[35.04,-79.46]];var s=t(6645),c=t.n(s);let d=e=>{let{organizations:n,allOrganizations:s=[],selectedCategory:c,onCategorySelect:d,selectedOrganization:u,onOrganizationClick:p}=e,[f,m]=(0,r.useState)(null),[g,h]=(0,r.useState)(!1),b=(0,r.useRef)(null),y=(0,r.useRef)([]),x=(0,r.useRef)(null),v=(0,r.useRef)(null);return((0,r.useEffect)(()=>{t.e(761).then(t.t.bind(t,5752,23)).then(e=>{let n=e.default;if(delete n.Icon.Default.prototype._getIconUrl,n.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"}),m(n),"undefined"!=typeof document){let e=document.createElement("link");e.rel="stylesheet",e.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",e.integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=",e.crossOrigin="",document.head.appendChild(e)}h(!0)})},[]),(0,r.useEffect)(()=>{if(!g||!f||b.current)return;console.log("Initializing map...");let e=f.map("map",{center:[34.6341,-79.0073],zoom:9,minZoom:6,maxZoom:18,zoomControl:!0,dragging:!0,touchZoom:!0,scrollWheelZoom:!0,doubleClickZoom:!0,boxZoom:!0,tap:!0,tapTolerance:15,trackResize:!0,worldCopyJump:!0});b.current=e,e.createPane("townLabels"),e.getPane("townLabels").style.zIndex="650",e.getPane("townLabels").style.pointerEvents="none",f.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xa9 OpenStreetMap contributors"}).addTo(e),x.current=f.polygon(i,{color:"#1e40af",weight:3,opacity:.8,fillColor:"transparent",fillOpacity:0,dashArray:"5, 10"}).addTo(e);let n=[{name:"Lumberton",coords:l.nr.lumberton,isCountySeat:!0},{name:"Pembroke",coords:l.nr.pembroke},{name:"Fairmont",coords:l.nr.fairmont},{name:"Maxton",coords:l.nr.maxton},{name:"Red Springs",coords:l.nr["red springs"]},{name:"St. Pauls",coords:l.nr["st. pauls"]},{name:"Rowland",coords:l.nr.rowland},{name:"Parkton",coords:l.nr.parkton}],t=f.layerGroup().addTo(e),o=f.layerGroup().addTo(e);return v.current=o,n.forEach(n=>{let o=f.circleMarker([n.coords.lat,n.coords.lon],{radius:n.isCountySeat?12:8,fillColor:n.isCountySeat?"#dc2626":"#3b82f6",color:"#ffffff",weight:2,opacity:1,fillOpacity:.7,pane:"markerPane"}).addTo(t),r=f.divIcon({html:'<div style="\n          font-weight: '.concat(n.isCountySeat?"bold":"600",";\n          font-size: ").concat(n.isCountySeat?"15px":"13px",';\n          color: #1e293b;\n          background-color: rgba(255, 255, 255, 0.95);\n          padding: 2px 6px;\n          border-radius: 4px;\n          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n          white-space: nowrap;\n          pointer-events: none;\n          transform: translateY(-8px);\n        ">').concat(n.name).concat(n.isCountySeat?" (County Seat)":"","</div>"),className:"town-label",iconSize:[0,0],iconAnchor:[0,-25]});f.marker([n.coords.lat,n.coords.lon],{icon:r,pane:"townLabels"}).addTo(e),o.bindTooltip(n.name,{permanent:!1,direction:"top",offset:[0,-10]})}),setTimeout(()=>{e.invalidateSize(),e.setView([34.6341,-79.0073],9)},100),f.control.layers(null,{Resources:o,Towns:t},{position:"topright",collapsed:!1}).addTo(e),()=>{b.current&&(b.current.remove(),b.current=null)}},[g,f]),(0,r.useEffect)(()=>{if(!g||!f||!b.current||!v.current)return;let e=b.current,t=v.current,o=x.current;if(console.log("Updating markers, selectedCategory:",c,"organizations:",n.length),y.current.forEach(e=>{t.removeLayer(e)}),y.current=[],(0,l.JE)(),n.forEach(e=>{let n=(0,l.Of)(e.address);if(!n)return;let o=a.C[e.category]||"\uD83D\uDCCD",r=f.divIcon({html:'\n          <div style="\n            background-color: white;\n            border: 2px solid #1e293b;\n            border-radius: 50%;\n            width: 32px;\n            height: 32px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-size: 18px;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.3);\n            position: relative;\n          ">\n            '.concat(o,'\n          </div>\n          <div style="\n            position: absolute;\n            bottom: -6px;\n            left: 50%;\n            transform: translateX(-50%);\n            width: 0;\n            height: 0;\n            border-left: 6px solid transparent;\n            border-right: 6px solid transparent;\n            border-top: 6px solid #1e293b;\n          "></div>\n        '),className:"custom-emoji-marker",iconSize:[32,38],iconAnchor:[16,38],popupAnchor:[0,-38]}),i=f.marker([n.lat,n.lon],{icon:r}).addTo(t);y.current.push(i);let s=encodeURIComponent(e.address),c='\n        <div style="max-width: 300px;">\n          <h3 style="font-weight: bold; margin: 0 0 4px 0; font-size: 16px;">'.concat(e.organizationName,'</h3>\n          <p style="margin: 0 0 4px 0; font-size: 14px; color: #666;">').concat(e.category,'</p>\n          <p style="margin: 0 0 8px 0; font-size: 13px;">').concat(e.address,"</p>\n          ").concat(e.phone?'<p style="margin: 0 0 4px 0; font-size: 14px;"><a href="tel:'.concat(e.phone.replace(/\D/g,""),'" style="color: #2563eb; text-decoration: none; font-weight: 500;">\uD83D\uDCDE ').concat(e.phone,"</a></p>"):"","\n          ").concat(e.hours?'<p style="margin: 0 0 4px 0; font-size: 13px; color: #666;"><strong>Hours:</strong> '.concat(e.hours,"</p>"):"","\n          ").concat(e.servicesOffered?'<p style="margin: 0 0 8px 0; font-size: 13px; color: #666;"><strong>Services:</strong> '.concat(e.servicesOffered.substring(0,100)).concat(e.servicesOffered.length>100?"...":"","</p>"):"",'\n          <div style="margin-top: 12px; display: flex; gap: 8px;">\n            ').concat(e.phone?'<a href="tel:'.concat(e.phone.replace(/\D/g,""),'" style="flex: 1; display: inline-block; padding: 8px 12px; background-color: #16a34a; color: white; text-align: center; text-decoration: none; border-radius: 6px; font-size: 14px; font-weight: 500;">Call</a>'):"",'\n            <a href="').concat("https://www.google.com/maps/dir/?api=1&destination=".concat(s),'" target="_blank" rel="noopener noreferrer" style="flex: 1; display: inline-block; padding: 8px 12px; background-color: #2563eb; color: white; text-align: center; text-decoration: none; border-radius: 6px; font-size: 14px; font-weight: 500;">\uD83D\uDCCD Directions</a>\n          </div>\n        </div>\n      ');i.bindPopup(c),i.on("click",()=>{p&&p(e)})}),c&&n.length>0){console.log("Zooming to category: ".concat(c,", organizations: ").concat(n.length));let t=f.latLngBounds([]),o=!1;n.forEach(e=>{let n=(0,l.Of)(e.address);n&&(t.extend([n.lat,n.lon]),o=!0)}),o&&t.isValid()&&(console.log("Bounds are valid, zooming to:",t.toBBoxString()),e.fitBounds(t,{padding:[150,150],maxZoom:11,animate:!0,duration:.5}))}else!c&&o&&(console.log("No category selected, keeping wide view"),e.setView([34.6341,-79.0073],9,{animate:!0,duration:.5}))},[g,f,n,c,p]),g)?(0,o.jsx)("div",{className:"h-full w-full relative",children:(0,o.jsx)("div",{id:"map",className:"h-full w-full"})}):(0,o.jsx)("div",{className:"h-full flex items-center justify-center",children:"Loading map..."})},u=c()(()=>Promise.resolve(d),{ssr:!1,loading:()=>(0,o.jsx)("div",{className:"h-full flex items-center justify-center",children:"Loading map..."})})},7357:(e,n,t)=>{Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return s}});let o=t(5155),r=t(2115),a=t(2146);function l(e){return{default:e&&"default"in e?e.default:e}}t(255);let i={loader:()=>Promise.resolve(l(()=>null)),loading:null,ssr:!0},s=function(e){let n={...i,...e},t=(0,r.lazy)(()=>n.loader().then(l)),s=n.loading;function c(e){let l=s?(0,o.jsx)(s,{isLoading:!0,pastDelay:!0,error:null}):null,i=!n.ssr||!!n.loading,c=i?r.Suspense:r.Fragment,d=n.ssr?(0,o.jsxs)(o.Fragment,{children:[null,(0,o.jsx)(t,{...e})]}):(0,o.jsx)(a.BailoutToCSR,{reason:"next/dynamic",children:(0,o.jsx)(t,{...e})});return(0,o.jsx)(c,{...i?{fallback:l}:{},children:d})}return c.displayName="LoadableComponent",c}},7828:(e,n,t)=>{Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"workAsyncStorageInstance",{enumerable:!0,get:function(){return o}});let o=(0,t(4054).createAsyncLocalStorage)()}}]);