(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[823],{255:(e,t,s)=>{"use strict";function r(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return r}}),s(5155),s(7650),s(5744),s(589)},1170:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var r=s(5155),n=s(2115),a=s(5695),i=s(6874),o=s.n(i),l=s(6610),c=s(2014),d=s(3395),u=s(7673),m=s(7218);let h=["Crisis Services","Food Services","Housing Services","Healthcare Services","Mental Health & Substance Use","Government Services","Tribal Services","Community Services","Community Groups & Development","Faith-Based Services","Legal Services","Law Enforcement","Education","Pharmacy","Cultural & Information Services"];function x(e){let{onCategorySelect:t}=e,s=(0,a.useRouter)(),{organizations:n}=(0,m.G)();return(0,r.jsxs)("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[(0,r.jsx)("div",{className:"bg-white shadow-sm",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,r.jsxs)(o(),{href:"/",className:"inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),(0,r.jsx)("span",{className:"font-medium",children:"Back to Home"})]})})}),(0,r.jsx)("div",{className:"flex-1 flex items-center justify-center px-4 py-8",children:(0,r.jsxs)("div",{className:"max-w-4xl w-full",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Find Resources in Robeson County"}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)(u.A,{onSpeechResult:e=>{let r=e.toLowerCase().trim();if(console.log("Map voice search transcript:",e),console.log("Normalized transcript:",r),n&&n.length>0){let a="pause"===r||"pauls"===r||"paul's"===r?"pawss":r,i=n.filter(e=>{let t=e.organizationName.toLowerCase();return t.includes(a)||a.includes(t)});if(i.length>0){if(console.log("Found ".concat(i.length," organization(s) matching:"),r),1===i.length){let e=i[0];t(e.category),setTimeout(()=>{window.dispatchEvent(new CustomEvent("zoomToOrganization",{detail:{organizationId:e.id}}))},500)}else s.push("/search?q=".concat(encodeURIComponent(e),"&from=voice"));return}}if(["near me","nearby","closest","close to me","around me","near"].some(e=>r.includes(e))){console.log('Detected "near me" request, redirecting to near-me page'),s.push("/near-me");return}if(r.includes("all")||r.includes("everything"))return void t("all");for(let[e,s]of Object.entries({"mental health":"Mental Health & Substance Use","substance abuse":"Mental Health & Substance Use","substance use":"Mental Health & Substance Use","law enforcement":"Law Enforcement","legal services":"Legal Services","crisis services":"Crisis Services","food services":"Food Services","housing services":"Housing Services","healthcare services":"Healthcare Services","government services":"Government Services","tribal services":"Tribal Services","community services":"Community Services","faith based":"Faith-Based Services","faith-based":"Faith-Based Services"}))if(r.includes(e))return void t(s);for(let e of h){let s=e.toLowerCase();if(s.includes(r)||r.includes(s)||(({"Crisis Services":["crisis","emergency","help","911","suicide","danger","urgent","immediate"],"Food Services":["food","hungry","meal","eat","pantry","breakfast","lunch","dinner","nutrition","groceries","i'm hungry","starving"],"Housing Services":["housing","shelter","home","homeless","rent","apartment","eviction","utilities","i'm homeless","place to stay","nowhere to go"],"Healthcare Services":["health","doctor","medical","hospital","clinic","sick","pain","nurse","urgent care","i'm sick","hurt","injured"],"Mental Health & Substance Use":["mental","counseling","therapy","addiction","substance","depression","depressed","anxiety","anxious","sad","worried","stress","stressed","drugs","alcohol","recovery","i'm depressed","i'm anxious","i'm sad"],"Government Services":["government","benefits","assistance","social services","welfare","medicaid","medicare","snap"],"Tribal Services":["tribal","lumbee","native","indian","indigenous"],"Community Services":["community","support","volunteer","help","services"],"Community Groups & Development":["group","development","organization","nonprofit","charity"],"Faith-Based Services":["faith","church","religious","prayer","spiritual","ministry","worship","god"],"Legal Services":["legal","lawyer","attorney","court","justice","rights","lawsuit","divorce"],"Law Enforcement":["police","sheriff","law","crime","safety","report","officer"],Education:["education","school","learning","library","study","class","training","ged","college"],Pharmacy:["pharmacy","medicine","prescription","drug","medication","pills","rx"],"Cultural & Information Services":["cultural","information","culture","arts","museum","history","heritage"]})[e]||[]).some(e=>r.includes(e)))return void t(e)}console.log('No category match found for "'.concat(r,'", redirecting to search')),s.push("/search?q=".concat(encodeURIComponent(e),"&from=voice"))},prompt:"Try saying: organization names (like 'PAWSS'), categories ('food', 'doctor'), emotions ('I'm depressed'), or 'near me'"}),(0,r.jsxs)("div",{className:"mt-4 p-5 bg-blue-50 rounded-lg border border-blue-200",children:[(0,r.jsx)("p",{className:"text-lg font-bold text-blue-900 mb-3",children:"\uD83C\uDF99️ Voice Search Examples:"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[(0,r.jsx)("span",{className:"text-base font-medium text-blue-800",children:'• "PAWSS"'}),(0,r.jsx)("span",{className:"text-base font-medium text-blue-800",children:'• "I need food"'}),(0,r.jsx)("span",{className:"text-base font-medium text-blue-800",children:'• "Find a doctor"'}),(0,r.jsx)("span",{className:"text-base font-medium text-blue-800",children:'• "I\'m depressed"'}),(0,r.jsx)("span",{className:"text-base font-medium text-blue-800",children:'• "Housing help"'}),(0,r.jsx)("span",{className:"text-base font-medium text-blue-800",children:'• "Mental health"'}),(0,r.jsx)("span",{className:"text-base font-medium text-blue-800",children:'• "Hospital"'}),(0,r.jsx)("span",{className:"text-base font-medium text-blue-800",children:'• "Pharmacy near me"'}),(0,r.jsx)("span",{className:"text-base font-medium text-blue-800",children:'• "Crisis help"'})]}),(0,r.jsx)("p",{className:"text-sm text-blue-700 mt-3 italic",children:"Tip: Say organization names directly or describe how you're feeling"})]}),(0,r.jsxs)("p",{className:"mt-3 text-sm text-gray-600",children:["Looking for help? Return to the ",(0,r.jsx)(o(),{href:"/",className:"text-blue-600 hover:underline",children:"home page"})," to use our chat assistant."]})]}),(0,r.jsx)("p",{className:"text-lg text-gray-600",children:"Select a category below to browse resources"})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:h.map(e=>(0,r.jsxs)("button",{onClick:()=>t(e),className:"".concat(d.G[e]," text-white rounded-lg p-4 hover:opacity-90 transition-opacity flex items-center space-x-3 shadow-md"),children:[(0,r.jsx)("span",{className:"text-2xl",children:d.C[e]}),(0,r.jsx)("span",{className:"font-medium text-left",children:e})]},e))}),(0,r.jsx)("div",{className:"mt-8",children:(0,r.jsxs)("button",{onClick:()=>t("all"),className:"w-full bg-gray-700 text-white rounded-lg p-4 hover:bg-gray-800 transition-colors flex items-center justify-center space-x-3 shadow-md",children:[(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDDFA️"}),(0,r.jsx)("span",{className:"font-medium",children:"View All Categories"})]})})]})})]})}var g=s(8546);async function p(e){if(!e||""===e.trim())return null;let t=e.toLowerCase().trim();for(let[e,s]of Object.entries(g.nr))if("default"!==e&&t.includes(e))return{lat:s.lat,lon:s.lon,displayName:e.charAt(0).toUpperCase()+e.slice(1)+", NC"};for(let[e,s]of Object.entries({28358:"lumberton",28372:"pembroke",28340:"fairmont",28364:"maxton",28377:"red springs",28384:"st. pauls",28383:"rowland",28371:"parkton",28369:"orrum"}))if(t.includes(e)){let t=g.nr[s];if(t)return{lat:t.lat,lon:t.lon,displayName:s.charAt(0).toUpperCase()+s.slice(1)+", NC "+e}}return{lat:g.nr.default.lat,lon:g.nr.default.lon,displayName:"Robeson County, NC"}}function f(e){let t,{organization:s,showDistance:n=!0,onZoomClick:a}=e,i=d.C[s.category]||"\uD83D\uDCCD";return(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow border border-gray-200",children:(0,r.jsxs)("div",{className:"p-3",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-lg flex-shrink-0",role:"img","aria-label":s.category,children:i}),(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-900 truncate",children:s.organizationName})]}),(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-0.5",children:s.category})]}),s.crisisService&&(0,r.jsx)("span",{className:"flex-shrink-0 inline-flex items-center px-1.5 py-0.5 bg-red-100 text-red-800 text-xs font-medium rounded",children:"\uD83D\uDEA8"})]}),n&&void 0!==s.distance&&(0,r.jsxs)("span",{className:"inline-flex items-center mt-2 px-2 py-0.5 bg-blue-50 text-blue-700 text-xs font-medium rounded",children:["\uD83D\uDCCD ",(0,g.BO)(s.distance)]}),(0,r.jsxs)("div",{className:"mt-2 space-y-1",children:[s.address&&(0,r.jsx)("p",{className:"text-xs text-gray-600 line-clamp-1",children:s.address}),s.hours&&(0,r.jsxs)("p",{className:"text-xs text-gray-600",children:[(0,r.jsx)("span",{className:"font-medium",children:"Hours:"})," ",s.hours]})]}),(0,r.jsxs)("div",{className:"mt-3 flex gap-2",children:[s.phone&&(0,r.jsxs)("a",{href:"tel:".concat(s.phone.replace(/\D/g,"")),className:"flex-1 flex items-center justify-center px-2 py-1.5 bg-green-600 text-white rounded text-xs font-medium hover:bg-green-700 transition-colors","aria-label":"Call ".concat(s.organizationName),children:[(0,r.jsx)("svg",{className:"w-3.5 h-3.5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),"Call"]}),s.address&&(0,r.jsxs)("a",{href:(t=s.address,"https://www.google.com/maps/search/?api=1&query=".concat(encodeURIComponent(t))),target:"_blank",rel:"noopener noreferrer",className:"flex-1 flex items-center justify-center px-2 py-1.5 bg-blue-600 text-white rounded text-xs font-medium hover:bg-blue-700 transition-colors","aria-label":"Get directions to ".concat(s.organizationName),children:[(0,r.jsx)("svg",{className:"w-3.5 h-3.5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})}),"Directions"]}),a&&(0,r.jsxs)("button",{onClick:()=>a(s),className:"flex-1 flex items-center justify-center px-2 py-1.5 bg-purple-600 text-white rounded text-xs font-medium hover:bg-purple-700 transition-colors","aria-label":"Zoom to ".concat(s.organizationName," on map"),children:[(0,r.jsx)("svg",{className:"w-3.5 h-3.5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})}),"Zoom"]})]})]})})}function b(e){let{organizations:t,allOrganizations:s,selectedOrganization:a,selectedCategory:i,onOrganizationClick:o,onCategoryChange:c,isOpen:u,onToggle:m}=e,[h,x]=(0,n.useState)("distance"),[b,v]=(0,n.useState)(null),[j,y]=(0,n.useState)(""),[w,N]=(0,n.useState)(null),[k,S]=(0,n.useState)(!1),[C,L]=(0,n.useState)(null),[z,M]=(0,n.useState)(!1),[O,E]=(0,n.useState)(!1),[P,D]=(0,n.useState)(!1),[R,F]=(0,n.useState)(!1),T=()=>{if(S(!0),L(null),!navigator.geolocation){L("Geolocation is not supported by your browser"),S(!1);return}navigator.geolocation.getCurrentPosition(e=>{let t={lat:e.coords.latitude,lon:e.coords.longitude};v(t),N(t),x("distance"),S(!1)},e=>{L(e.message),S(!1)})},_=[...t].sort((e,t)=>{if("distance"===h&&(b||w))return w||b?(e.distance||1/0)-(t.distance||1/0):0;return"name"===h?e.organizationName.localeCompare(t.organizationName):"category"===h?e.category!==t.category?e.category.localeCompare(t.category):e.organizationName.localeCompare(t.organizationName):0});(0,n.useEffect)(()=>{P||!u||b||w||(D(!0),setTimeout(()=>{T()},500))},[u,P,b,w]),(0,n.useEffect)(()=>{let e=w||b;e&&t.forEach(t=>{let s=t.address?(0,g.Of)(t.address):null;s&&(t.distance=(0,g.gd)(e.lat,e.lon,s.lat,s.lon))})},[b,w,t]);let W=async()=>{if(j.trim()){M(!0),L(null);try{let e=await p(j);e?(N({lat:e.lat,lon:e.lon}),x("distance")):L("Could not find that address")}catch(e){L("Error searching for address")}finally{M(!1)}}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("button",{onClick:m,className:"fixed bottom-4 right-4 z-20 lg:hidden bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-full shadow-xl border border-blue-800 flex items-center gap-2 px-5 py-3.5 hover:shadow-2xl transition-all transform hover:scale-105","aria-label":u?"Close resource list":"View resource list",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u?(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),(0,r.jsx)("span",{className:"font-semibold",children:u?"Close":"View List"})]}),u&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/20 z-10 lg:hidden",onClick:m}),(0,r.jsx)("div",{className:"\n        fixed lg:relative bg-white border-gray-200 shadow-2xl lg:shadow-none\n        transition-all duration-300 ease-in-out z-20 lg:z-10\n        \n        /* Mobile: Bottom sheet */\n        bottom-0 left-0 right-0 lg:bottom-auto lg:left-auto lg:right-auto\n        h-[75vh] lg:h-full\n        rounded-t-3xl lg:rounded-none\n        border-t lg:border-t-0 lg:border-r\n        ".concat(u?"translate-y-0":"translate-y-full lg:translate-y-0","\n        \n        /* Desktop: Side panel */\n        lg:top-0 lg:translate-x-0\n        w-full lg:w-96\n      "),children:(0,r.jsxs)("div",{className:"h-full flex flex-col",children:[(0,r.jsx)("div",{className:"lg:hidden flex justify-center py-3 cursor-pointer hover:bg-gray-50 transition-colors",onClick:m,children:(0,r.jsx)("div",{className:"w-16 h-1.5 bg-gray-400 rounded-full"})}),(0,r.jsxs)("div",{className:"border-b border-gray-200",children:[(0,r.jsxs)("div",{className:"p-4 pt-2 lg:pt-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Resources"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-sm text-gray-500",children:i?(0,r.jsxs)(r.Fragment,{children:["Showing ",t.length," of ",s.length," locations"]}):(0,r.jsxs)(r.Fragment,{children:[t.length," locations"]})}),(0,r.jsx)("button",{onClick:m,className:"lg:hidden p-2 bg-gray-200 hover:bg-gray-300 rounded-full transition-colors shadow-sm","aria-label":"Close list",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,r.jsxs)("button",{onClick:()=>F(!R),className:"mt-3 w-full flex items-center justify-between px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:[(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Filters & Search",(i||"distance"===h)&&(0,r.jsx)("span",{className:"ml-2 px-2 py-0.5 bg-blue-600 text-white text-xs rounded-full",children:"Active"})]}),(0,r.jsx)("svg",{className:"w-5 h-5 text-gray-500 transition-transform ".concat(R?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),R&&(0,r.jsxs)("div",{className:"p-4 pt-3 space-y-3 border-t border-gray-100",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"category-filter",className:"text-sm font-medium text-gray-700",children:"Filter by category:"}),(0,r.jsxs)("select",{id:"category-filter",value:i||"",onChange:e=>null==c?void 0:c(e.target.value||null),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsxs)("option",{value:"",children:["All Categories (",s.length," locations)"]}),Array.from(new Set(s.map(e=>e.category))).sort().map(e=>{let t=d.C[e]||"\uD83D\uDCCD",n=(0,l.T)(s,e).length;return(0,r.jsxs)("option",{value:e,children:[t," ",e," (",n," locations)"]},e)})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"Find resources near you:"}),(0,r.jsx)("button",{onClick:T,disabled:k,className:"w-full px-3 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-colors flex items-center justify-center gap-2",children:k?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Finding your location..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Use My Current Location"]})}),C&&(0,r.jsx)("p",{className:"text-xs text-red-600",children:C}),(0,r.jsx)("div",{className:"text-center text-xs text-gray-500 my-1",children:"— OR —"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),W()},className:"space-y-1",children:[(0,r.jsx)("label",{htmlFor:"address-search",className:"text-xs text-gray-600",children:"Search by town or zip code:"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{id:"address-search",type:"text",placeholder:"e.g., Lumberton or 28358",value:j,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 pr-20 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,r.jsxs)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window))return void L("Voice search is not supported in your browser");let e=new(window.webkitSpeechRecognition||window.SpeechRecognition);e.lang="en-US",e.continuous=!1,e.interimResults=!1,e.onstart=()=>{E(!0),L(null)},e.onresult=e=>{y(e.results[0][0].transcript),E(!1),setTimeout(()=>{W()},500)},e.onerror=e=>{E(!1),"no-speech"===e.error?L("No speech detected. Please try again."):L("Voice search error. Please try typing instead.")},e.onend=()=>{E(!1)},e.start()},disabled:O,className:"p-1.5 rounded-lg transition-colors ".concat(O?"bg-red-100 text-red-600 animate-pulse":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"),"aria-label":O?"Listening...":"Search by voice",title:O?"Listening...":"Search by voice",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})}),(0,r.jsx)("button",{type:"submit",disabled:z||!j.trim(),className:"p-1.5 rounded-lg text-gray-400 hover:text-gray-600 hover:bg-gray-100 disabled:opacity-50 transition-colors","aria-label":"Search location",children:z?(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-gray-400 border-t-transparent"}):(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})]}),O&&(0,r.jsx)("p",{className:"text-xs text-red-600 animate-pulse",children:"\uD83C\uDFA4 Listening... speak now"})]})]}),(0,r.jsxs)("div",{className:"pt-2 border-t border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("label",{htmlFor:"sort-select",className:"text-sm text-gray-600",children:"Sort list by:"}),(0,r.jsxs)("select",{id:"sort-select",value:h,onChange:e=>x(e.target.value),className:"flex-1 px-3 py-1 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"name",children:"Name (A-Z)"}),(0,r.jsx)("option",{value:"distance",disabled:!b&&!w,children:b||w?"Distance (nearest first)":"Distance (set location first)"}),(0,r.jsx)("option",{value:"category",children:"Category"})]})]}),"distance"===h&&(0,r.jsx)("p",{className:"text-xs mt-1",children:b||w?(0,r.jsx)("span",{className:"text-green-600",children:"✓ Showing nearest resources first"}):(0,r.jsx)("span",{className:"text-amber-600",children:"⚠️ Set location to sort by distance"})})]})]})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,r.jsx)("div",{className:"p-3 space-y-2",children:_.map(e=>(0,r.jsx)("div",{onClick:()=>{console.log("Sidebar card clicked:",{id:e.id,name:e.organizationName,category:e.category,crisisService:e.crisisService}),null==o||o(e)},className:"cursor-pointer transition-all ".concat((null==a?void 0:a.id)===e.id?"ring-2 ring-blue-500 rounded-lg":""),children:(0,r.jsx)(f,{organization:e,showDistance:"distance"===h&&(!!b||!!w),onZoomClick:e=>{window.dispatchEvent(new CustomEvent("zoomToOrganization",{detail:{organizationId:e.id}})),o&&o(e)}})},e.id))})})]})})]})}function v(e){let t,{organization:s,onClose:n,userLocation:a}=e;if(!s)return null;let i=d.C[s.category]||"\uD83D\uDCCD";return(0,r.jsxs)("div",{className:"fixed inset-x-0 bottom-0 z-50 animate-slide-up",children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black/20",onClick:n}),(0,r.jsxs)("div",{className:"relative bg-white rounded-t-2xl shadow-2xl max-h-[70vh] overflow-hidden",children:[(0,r.jsx)("div",{className:"sticky top-0 bg-white z-10 pt-2 pb-1",children:(0,r.jsx)("div",{className:"w-12 h-1 bg-gray-300 rounded-full mx-auto"})}),(0,r.jsxs)("div",{className:"px-4 pb-3 border-b border-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1 pr-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-2xl",children:i}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:s.organizationName})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-0.5",children:s.category}),s.crisisService&&(0,r.jsx)("span",{className:"inline-flex items-center mt-1 px-2 py-0.5 bg-red-100 text-red-800 text-xs font-medium rounded",children:"\uD83D\uDEA8 Crisis Service"})]}),(0,r.jsx)("button",{onClick:n,className:"p-1 rounded-full hover:bg-gray-100","aria-label":"Close",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a&&void 0!==s.distance&&(0,r.jsxs)("span",{className:"inline-flex items-center mt-2 px-2 py-0.5 bg-blue-50 text-blue-700 text-xs font-medium rounded",children:["\uD83D\uDCCD ",(0,g.BO)(s.distance)," away"]})]}),(0,r.jsxs)("div",{className:"overflow-y-auto px-4 py-3",style:{maxHeight:"calc(70vh - 120px)"},children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[s.phone&&(0,r.jsxs)("a",{href:"tel:".concat(s.phone.replace(/\D/g,"")),className:"flex items-center justify-center px-3 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),"Call Now"]}),s.address&&(0,r.jsxs)("a",{href:(t=s.address,"https://www.google.com/maps/search/?api=1&query=".concat(encodeURIComponent(t))),target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center px-3 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})}),"Get Directions"]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[s.address&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Address"}),(0,r.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:s.address})]}),s.hours&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Hours"}),(0,r.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:s.hours})]}),s.phone&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Phone"}),(0,r.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:s.phone})]}),s.servicesOffered&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Services"}),(0,r.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:s.servicesOffered})]}),s.description&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"About"}),(0,r.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:s.description})]}),s.website&&(0,r.jsx)("div",{children:(0,r.jsxs)("a",{href:s.website.startsWith("http")?s.website:"https://".concat(s.website),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Visit Website"]})})]})]})]})]})}function j(){let[e,t]=(0,n.useState)(!1),[s,a]=(0,n.useState)(0);(0,n.useEffect)(()=>{!localStorage.getItem("hasSeenMapGuide")&&window.innerWidth<768&&t(!0)},[]);let i=()=>{localStorage.setItem("hasSeenMapGuide","true"),t(!1)},o=[{title:"Welcome to the Resource Map!",description:"Let me show you how to find resources near you",icon:"\uD83D\uDC4B"},{title:"Tap Map Markers",description:"Tap any pin on the map to see quick actions like Call or Directions",icon:"\uD83D\uDCCD"},{title:"View Full List",description:"Tap the 'View List' button to browse all resources with detailed information",icon:"\uD83D\uDCCB"},{title:"You're All Set!",description:"Start exploring resources in Robeson County",icon:"✨"}];if(!e)return null;let l=o[s];return(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:(0,r.jsx)("div",{className:"bg-white rounded-2xl shadow-xl max-w-sm w-full p-6 animate-slide-up",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-5xl mb-4",children:l.icon}),(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:l.title}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:l.description}),(0,r.jsx)("div",{className:"flex justify-center gap-2 mb-6",children:o.map((e,t)=>(0,r.jsx)("div",{className:"w-2 h-2 rounded-full transition-colors ".concat(t===s?"bg-blue-600":"bg-gray-300")},t))}),(0,r.jsx)("div",{className:"flex gap-3",children:s<o.length-1?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:i,className:"flex-1 px-4 py-2 text-gray-600 bg-gray-100 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Skip"}),(0,r.jsx)("button",{onClick:()=>a(s+1),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Next"})]}):(0,r.jsx)("button",{onClick:i,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Get Started"})})]})})})}function y(){(0,a.useRouter)();let e=(0,a.useSearchParams)(),{organizations:t,loading:s}=(0,m.G)(),[i,d]=(0,n.useState)(null),[u,h]=(0,n.useState)(!0),[p,f]=(0,n.useState)(null),[y,w]=(0,n.useState)(!1),[N,k]=(0,n.useState)(!1),[S,C]=(0,n.useState)(null),[L,z]=(0,n.useState)(!1),[M,O]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{let e=()=>{z(window.innerWidth<768),window.innerWidth>=1024&&w(!0)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,n.useEffect)(()=>{let e=e=>{let s=e.detail,r=t.find(e=>e.id===s);r&&(f(r),k(!0))};return window.addEventListener("showOrgDetails",e),()=>{window.removeEventListener("showOrgDetails",e)}},[t]),(0,n.useEffect)(()=>{if(!M&&t.length>0){let s=e.get("org");if(s){let e=t.find(e=>e.id===s);e&&(console.log("Found organization from URL:",e.organizationName),f(e),d(e.category),h(!1),w(!0),O(!0),window.dispatchEvent(new CustomEvent("zoomToOrganization",{detail:{organizationId:e.id}})))}}},[e,t,M]),(0,n.useEffect)(()=>{let e=e=>{let s=e.detail.organizationId,r=t.find(e=>e.id===s);r&&(console.log("Map page: Setting selected organization for zoom:",r.organizationName),f(r),w(!0))};return window.addEventListener("zoomToOrganization",e),()=>{window.removeEventListener("zoomToOrganization",e)}},[t]),(0,n.useEffect)(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{C({lat:e.coords.latitude,lon:e.coords.longitude})},e=>{console.log("Location permission denied or error:",e)})},[]),(0,n.useEffect)(()=>{if(p&&S){let e=(0,g.Of)(p.address);e&&(p.distance=(0,g.gd)(S.lat,S.lon,e.lat,e.lon))}},[p,S]),s)?(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded w-48 mb-4"}),(0,r.jsx)("div",{className:"h-64 w-64 bg-gray-200 rounded-lg"})]})}):u?(0,r.jsx)(x,{onCategorySelect:e=>{"all"===e?d(null):d(e),h(!1)}}):(0,r.jsxs)("div",{className:"fixed inset-0 flex flex-col",children:[(0,r.jsx)("div",{className:"bg-white shadow-sm z-10 flex-shrink-0",children:(0,r.jsx)("div",{className:"px-3 sm:px-4 py-2 sm:py-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsxs)("button",{onClick:()=>{h(!0),d(null)},className:"inline-flex items-center gap-1.5 px-3 py-1.5 sm:px-4 sm:py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-all text-sm sm:text-base flex-shrink-0","aria-label":"Go back to category selection",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Change Category"}),(0,r.jsx)("span",{className:"sm:hidden",children:"Back"})]}),(0,r.jsx)("h1",{className:"text-base sm:text-lg md:text-xl font-semibold text-gray-900 text-center px-2",children:i?"".concat(i," Resources"):"All Resources Map"}),(0,r.jsxs)(o(),{href:"/",className:"inline-flex items-center gap-1.5 px-3 py-1.5 sm:px-4 sm:py-2 bg-gray-600 text-white font-medium rounded-lg hover:bg-gray-700 transition-all text-sm sm:text-base flex-shrink-0","aria-label":"Go to home page",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Home"})]})]})})}),(0,r.jsxs)("div",{className:"flex-1 flex relative overflow-hidden",children:[(0,r.jsx)(b,{organizations:i?(0,l.T)(t,i):t,allOrganizations:t,selectedOrganization:p,selectedCategory:i,onOrganizationClick:e=>{console.log("Sidebar received organization click:",{id:e.id,name:e.organizationName,category:e.category,crisisService:e.crisisService,currentSelected:null==p?void 0:p.id}),f(e),window.innerWidth>=1024&&w(!0)},onCategoryChange:e=>{d(e)},isOpen:y,onToggle:()=>w(!y)}),(0,r.jsxs)("div",{className:"flex-1 relative",children:[(0,r.jsx)(c.default,{organizations:(()=>{let e=i?(0,l.T)(t,i):t,s=e.filter(e=>e.crisisService);return s.length>0&&console.log("Filtered organizations include ".concat(s.length," crisis service orgs in category: ").concat(i||"All")),e})(),allOrganizations:t,selectedCategory:i,selectedOrganization:p,onCategorySelect:e=>{d(e)},onOrganizationClick:e=>{console.log("Map page received organization click:",{id:e.id,name:e.organizationName,category:e.category,crisisService:e.crisisService,selectedCategory:i}),f(e),window.innerWidth<768&&w(!0)}}),!y&&(0,r.jsx)("div",{className:"lg:hidden absolute top-4 left-4 right-4 bg-white/90 backdrop-blur-sm rounded-lg p-3 shadow-md border border-gray-200",children:(0,r.jsxs)("p",{className:"text-sm text-gray-700 text-center",children:[(0,r.jsx)("span",{className:"font-medium",children:"Tap markers on the map"})," to see details, or use the",(0,r.jsx)("span",{className:"font-medium text-blue-600",children:' "View List" '}),"button to browse all resources"]})})]})]}),L&&(0,r.jsx)(v,{organization:N?p:null,onClose:()=>k(!1),userLocation:S}),(0,r.jsx)(j,{})]})}function w(){return(0,r.jsx)(n.Suspense,{fallback:(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded w-48 mb-4"}),(0,r.jsx)("div",{className:"h-64 w-64 bg-gray-200 rounded-lg"})]})}),children:(0,r.jsx)(y,{})})}},2146:(e,t,s)=>{"use strict";function r(e){let{reason:t,children:s}=e;return s}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return r}}),s(5262)},4054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{bindSnapshot:function(){return i},createAsyncLocalStorage:function(){return a},createSnapshot:function(){return o}});let s=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class r{disable(){throw s}getStore(){}run(){throw s}exit(){throw s}enterWith(){throw s}static bind(e){return e}}let n="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function a(){return n?new n:new r}function i(e){return n?n.bind(e):r.bind(e)}function o(){return n?n.snapshot():function(e,...t){return e(...t)}}},5028:(e,t,s)=>{"use strict";s.d(t,{default:()=>n.a});var r=s(6645),n=s.n(r)},5695:(e,t,s)=>{"use strict";var r=s(8999);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},5744:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return r.workAsyncStorageInstance}});let r=s(7828)},6645:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});let r=s(8229)._(s(7357));function n(e,t){var s;let n={};"function"==typeof e&&(n.loader=e);let a={...n,...t};return(0,r.default)({...a,modules:null==(s=a.loadableGenerated)?void 0:s.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7218:(e,t,s)=>{"use strict";s.d(t,{G:()=>l,O:()=>o});var r=s(5155),n=s(2115),a=s(6610);let i=(0,n.createContext)(void 0);function o(e){let{children:t}=e,[s,o]=(0,n.useState)([]),[l,c]=(0,n.useState)(!0),[d,u]=(0,n.useState)(null),m=async()=>{try{c(!0),u(null);let e=await (0,a.i)();o(e)}catch(e){u(e instanceof Error?e.message:"Failed to load organizations"),console.error("Error loading organizations:",e)}finally{c(!1)}};return(0,n.useEffect)(()=>{m()},[]),(0,r.jsx)(i.Provider,{value:{organizations:s,loading:l,error:d,refetch:m},children:t})}function l(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useOrganizations must be used within an OrganizationsProvider");return e}},7357:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let r=s(5155),n=s(2115),a=s(2146);function i(e){return{default:e&&"default"in e?e.default:e}}s(255);let o={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},l=function(e){let t={...o,...e},s=(0,n.lazy)(()=>t.loader().then(i)),l=t.loading;function c(e){let i=l?(0,r.jsx)(l,{isLoading:!0,pastDelay:!0,error:null}):null,o=!t.ssr||!!t.loading,c=o?n.Suspense:n.Fragment,d=t.ssr?(0,r.jsxs)(r.Fragment,{children:[null,(0,r.jsx)(s,{...e})]}):(0,r.jsx)(a.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(s,{...e})});return(0,r.jsx)(c,{...o?{fallback:i}:{},children:d})}return c.displayName="LoadableComponent",c}},7673:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(5155),n=s(2115);function a(e){let{onSpeechResult:t,prompt:s="Say a category name like 'food' or 'healthcare'"}=e,[a,i]=(0,n.useState)(!1),[o,l]=(0,n.useState)(null),[c,d]=(0,n.useState)(!0),[u,m]=(0,n.useState)(null),[h,x]=(0,n.useState)(null),[g,p]=(0,n.useState)(60);(0,n.useEffect)(()=>{d("webkitSpeechRecognition"in window||"SpeechRecognition"in window)},[]);let f=()=>{if(!c)return void l("Voice search is not supported in your browser");let e=new(window.webkitSpeechRecognition||window.SpeechRecognition);e.lang="en-US",e.continuous=!0,e.interimResults=!1,e.maxAlternatives=1,m(e),x(setTimeout(()=>{e&&(e.stop(),i(!1),l("Recording time limit reached (1 minute). Click the button to try again."))},6e4));let s=60,r=setInterval(()=>{p(s-=1),s<=0&&clearInterval(r)},1e3);e.intervalId=r,e.onstart=()=>{i(!0),l(null)},e.onresult=s=>{let r=s.results[s.results.length-1];if(r.isFinal){let s=r[0].transcript.toLowerCase();h&&clearTimeout(h),e.intervalId&&clearInterval(e.intervalId),e.stop(),i(!1),p(60),t(s)}},e.onerror=e=>{if("no-speech"!==e.error)if("audio-capture"===e.error)h&&clearTimeout(h),i(!1),l("No microphone found. Please check your microphone.");else if("not-allowed"===e.error)h&&clearTimeout(h),i(!1),l("Microphone access denied. Please allow microphone access.");else{if("aborted"===e.error)return;h&&clearTimeout(h),i(!1),l("Voice search error. Please try again.")}},e.onend=()=>{h&&clearTimeout(h),e.intervalId&&clearInterval(e.intervalId),i(!1),m(null),p(60)},e.start()};return c?(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("button",{onClick:()=>{a&&u?(h&&clearTimeout(h),u.intervalId&&clearInterval(u.intervalId),u.stop(),i(!1),p(60)):f()},className:"inline-flex items-center gap-2 px-6 py-3 rounded-lg font-medium transition-all ".concat(a?"bg-red-600 text-white animate-pulse":"bg-blue-600 text-white hover:bg-blue-700"),"aria-label":a?"Stop listening":"Search by voice",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),a?"Stop Listening":"Search by Voice"]}),a&&(0,r.jsxs)("div",{className:"mt-3 p-4 bg-blue-50 rounded-lg border border-blue-200 animate-pulse",children:[(0,r.jsx)("p",{className:"text-lg font-medium text-blue-900",children:"\uD83C\uDFA4 Listening... Speak when ready!"}),(0,r.jsx)("p",{className:"text-base text-blue-800 mt-2 font-medium",children:s}),(0,r.jsxs)("p",{className:"text-sm text-blue-600 mt-2",children:["Time remaining: ",g," seconds - take your time to think about what you need."]}),(0,r.jsx)("div",{className:"mt-2 w-full bg-blue-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-1000",style:{width:"".concat(g/60*100,"%")}})})]}),o&&(0,r.jsx)("div",{className:"mt-3 p-3 bg-red-50 rounded-lg border border-red-200",children:(0,r.jsx)("p",{className:"text-sm text-red-700",children:o})})]}):null}},7828:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return r}});let r=(0,s(4054).createAsyncLocalStorage)()},9997:(e,t,s)=>{Promise.resolve().then(s.bind(s,1170))}},e=>{var t=t=>e(e.s=t);e.O(0,[874,610,14,441,684,358],()=>t(9997)),_N_E=e.O()}]);