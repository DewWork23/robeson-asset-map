(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[634],{1573:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});var a=n(5155),r=n(2115),s=n(6874),l=n.n(s),i=n(5695);function o(){let[e,t]=(0,r.useState)(!1),n=(0,i.usePathname)(),s=()=>{t(!1)},o=e=>n===e||"/"===e&&("/"===n||n.startsWith("/category"));return(0,a.jsx)("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-white shadow-md",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)("div",{className:"hidden md:flex space-x-6 mx-auto",children:[(0,a.jsx)(l(),{href:"/",className:"px-4 py-2 rounded-lg font-bold transition-colors ".concat(o("/")?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"),children:"Home"}),(0,a.jsx)(l(),{href:"/map",className:"px-4 py-2 rounded-lg font-bold transition-colors ".concat(o("/map")?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"),children:"Map View"}),(0,a.jsx)(l(),{href:"/dashboard",className:"px-4 py-2 rounded-lg font-bold transition-colors ".concat(o("/dashboard")?"bg-red-100 text-red-700":"text-gray-700 hover:bg-gray-100"),children:"Crisis Dashboard"}),(0,a.jsxs)(l(),{href:"/providers",className:"px-4 py-2 rounded-lg font-bold transition-colors flex items-center gap-2 ".concat(o("/providers")?"bg-green-100 text-green-700":"text-gray-700 hover:bg-gray-100"),children:["Find a Provider",(0,a.jsx)("span",{className:"text-xs bg-green-500 text-white px-2 py-0.5 rounded-full",children:"BETA"})]}),(0,a.jsxs)(l(),{href:"/events",className:"px-4 py-2 rounded-lg font-bold transition-colors flex items-center gap-2 ".concat(o("/events")?"bg-purple-100 text-purple-700":"text-gray-700 hover:bg-gray-100"),children:["Events",(0,a.jsx)("span",{className:"text-xs bg-purple-500 text-white px-2 py-0.5 rounded-full",children:"BETA"})]})]}),(0,a.jsx)("button",{onClick:()=>{t(!e)},className:"md:hidden p-2 rounded-lg hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 mx-auto","aria-label":"Toggle navigation menu",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e?(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),e&&(0,a.jsxs)("div",{className:"md:hidden border-t border-gray-200 py-2",children:[(0,a.jsx)(l(),{href:"/",onClick:s,className:"block px-4 py-3 rounded-lg font-bold transition-colors ".concat(o("/")?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"),children:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:"\uD83C\uDFE0"})," Home"]})}),(0,a.jsx)(l(),{href:"/map",onClick:s,className:"block px-4 py-3 rounded-lg font-bold transition-colors ".concat(o("/map")?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"),children:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:"\uD83D\uDDFA️"})," Map View"]})}),(0,a.jsx)(l(),{href:"/dashboard",onClick:s,className:"block px-4 py-3 rounded-lg font-bold transition-colors ".concat(o("/dashboard")?"bg-red-100 text-red-700":"text-gray-700 hover:bg-gray-100"),children:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:"\uD83D\uDCCA"})," Crisis Dashboard"]})}),(0,a.jsx)(l(),{href:"/providers",onClick:s,className:"block px-4 py-3 rounded-lg font-bold transition-colors ".concat(o("/providers")?"bg-green-100 text-green-700":"text-gray-700 hover:bg-gray-100"),children:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:"\uD83D\uDC68‍⚕️"})," Find a Provider",(0,a.jsx)("span",{className:"text-xs bg-green-500 text-white px-2 py-0.5 rounded-full",children:"BETA"})]})}),(0,a.jsx)(l(),{href:"/events",onClick:s,className:"block px-4 py-3 rounded-lg font-bold transition-colors ".concat(o("/events")?"bg-purple-100 text-purple-700":"text-gray-700 hover:bg-gray-100"),children:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:"\uD83D\uDCC5"})," Events",(0,a.jsx)("span",{className:"text-xs bg-purple-500 text-white px-2 py-0.5 rounded-full",children:"BETA"})]})}),(0,a.jsx)("div",{className:"border-t border-gray-200 mt-2 pt-2",children:(0,a.jsx)("a",{href:"tel:988",className:"block px-4 py-3 bg-red-50 text-red-700 rounded-lg font-bold hover:bg-red-100 transition-colors",children:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:"☎️"})," Crisis Hotline: 988"]})})})]})]})})}},4167:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>g});var a=n(5155),r=n(2115),s=n(1573),l=n(4266),i=n(1314),o=n(940),d=n(4396),c=n(9509);function g(){let e=(0,r.useRef)(null),[t,n]=(0,r.useState)([]),[g,m]=(0,r.useState)([]),[x,p]=(0,r.useState)(null),[h,u]=(0,r.useState)(!1),[b,v]=(0,r.useState)(!1),[y,f]=(0,r.useState)(!1),[j,N]=(0,r.useState)(!1),[w,S]=(0,r.useState)(""),[k,C]=(0,r.useState)(""),[D,T]=(0,r.useState)(!0),[E,O]=(0,r.useState)(!1),[I,A]=(0,r.useState)(null),[z,L]=(0,r.useState)(""),G=window.innerWidth<768,[M,P]=(0,r.useState)(G?"timeGridDay":"timeGridWeek"),[_,F]=(0,r.useState)(!0),[R,J]=(0,r.useState)(0),[B,U]=(0,r.useState)({title:"",date:new Date().toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],time:"",startTime:"9:00 AM",endTime:"10:00 AM",location:"",description:"",category:"Community Service",organizer:"",link:""}),q=["Community Service","Health","Career","Education","Recreation"],W=(()=>{let e=[];for(let t=0;t<24;t++)for(let n=0;n<60;n+=30){let a=0===t?12:t>12?t-12:t,r=t<12?"AM":"PM",s=n.toString().padStart(2,"0");e.push("".concat(a,":").concat(s," ").concat(r))}return e})();(0,r.useEffect)(()=>{"true"===sessionStorage.getItem("calendarAdmin")&&f(!0),H()},[]);let H=async()=>{T(!0);try{let e="1a6iGXkroz1IeH3O2DNrHi1UqnoCfX6N37eDRtWuySbs",t="AIzaSyA9cwF3iD_dAVqJOtz7NZIhDmAxFqeGAKw";if(e&&t){console.log("Loading events from Google Sheets...");let a="https://sheets.googleapis.com/v4/spreadsheets/".concat(e,"/values/Events!A:M?key=").concat(t),r=await fetch(a);if(r.ok){let e=(await r.json()).values||[];if(e.length>1){console.log("Header row:",e[0]);let t=e.slice(1).map((e,t)=>(t<3&&(console.log("Row ".concat(t,":"),e),console.log("Row ".concat(t," mapping - ID: ").concat(e[0],", Title: ").concat(e[1],", Date: ").concat(e[2]))),{id:e[0]||(t+1).toString(),title:e[1]||"",date:e[2]||"",endDate:e[3]||e[2]||"",time:e[4]&&e[5]?"".concat(e[4]," - ").concat(e[5]):"",startTime:e[4]||"9:00 AM",endTime:e[5]||"10:00 AM",location:e[6]||"",description:e[7]||"",category:e[8]||"Community Service",organizer:e[9]||"",link:e[13]||""}));console.log("Loaded",t.length,"events from Google Sheets"),console.log("Event IDs:",t.map(e=>({id:e.id,title:e.title,date:e.date})));let a=JSON.parse(localStorage.getItem("deletedEvents")||"[]").map(e=>e.id),r=t.filter(e=>!a.includes(e.id)&&(!!e.date&&""!==e.date.trim()||(console.log("Filtering out event with empty date:",e.title),!1)));console.log("After filtering, events count:",r.length),n(r);let s=r.map(e=>ee(e));m(s);return}}}console.log("Falling back to events.json...");let a=window.location.pathname.includes("/robeson-app/")?"/robeson-app":"",r=await fetch("".concat(a,"/events.json")),s=await r.json();n(s.events||[]);let l=(s.events||[]).map(e=>ee(e));m(l)}catch(e){console.error("Error loading events:",e),n([]),m([])}finally{T(!1)}},V=()=>{"SPARC"===w?(f(!0),sessionStorage.setItem("calendarAdmin","true"),N(!1),S(""),C("")):C("Incorrect password")},X=async e=>{n(t=>t.filter(t=>t.id!==e)),m(t=>t.filter(t=>t.id!==e));let t=JSON.parse(localStorage.getItem("deletedEvents")||"[]");t.push({id:e,deletedAt:new Date().toISOString()}),localStorage.setItem("deletedEvents",JSON.stringify(t));let a=c.env.NEXT_PUBLIC_GOOGLE_SCRIPT_URL;if(a)try{await fetch(a,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"delete",id:e})}),console.log("Delete request sent for event ID:",e),alert("Event deleted"),setTimeout(()=>{let e=JSON.parse(localStorage.getItem("deletedEvents")||"[]"),t=new Date(Date.now()-3e5),n=e.filter(e=>new Date(e.deletedAt)>t);localStorage.setItem("deletedEvents",JSON.stringify(n))},3e5)}catch(e){console.error("Error deleting from Google Sheets:",e),alert("Event deleted")}else alert("Event deleted")},Z=async()=>{if(z)return;if(!B.title||!B.date||!B.startTime||!B.endTime||!B.location||!B.organizer||!B.description)return void L("Please fill in all required fields");L("");let e=E&&I?I:Date.now().toString(),t="".concat(B.startTime," - ").concat(B.endTime),a={id:e,title:B.title||"",date:B.date||new Date().toISOString().split("T")[0],endDate:B.endDate||B.date||new Date().toISOString().split("T")[0],time:t,location:B.location||"",description:B.description||"",category:B.category||"Other",organizer:B.organizer||"",startTime:B.startTime,endTime:B.endTime,link:B.link||""};console.log("Event to add:",a),E?n(t=>t.map(t=>t.id===e?a:t)):n(e=>{let t=[...e,a];return console.log("Previous events:",e),console.log("Adding event:",a),console.log("Updated events:",t),t});let r=ee(a);E?m(t=>t.map(t=>t.id===e?r:t)):m(e=>{let t=[...e,r];return console.log("Updated calendar events:",t),t}),J(e=>e+1),v(!1),O(!1),A(null),L(""),U({title:"",date:new Date().toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],time:"",startTime:"9:00 AM",endTime:"10:00 AM",location:"",description:"",category:"Community Service",organizer:"",link:""});let s=c.env.NEXT_PUBLIC_GOOGLE_SCRIPT_URL;if(s)try{let e={action:E?"update":"add",id:a.id,title:a.title,date:a.date,endDate:a.endDate||a.date,startTime:a.startTime||"",endTime:a.endTime||"",location:a.location,description:a.description,category:a.category,organizer:a.organizer,contactEmail:"",contactPhone:"",link:a.link||""};console.log("Sending to Google Sheets:",e),await fetch(s,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),console.log(E?"Event updated in Google Sheets":"Event submitted to Google Sheets"),alert(E?"Event updated":"Event added")}catch(t){console.error("Error submitting to Google Sheets:",t),alert("Event saved");let e=JSON.parse(sessionStorage.getItem("pendingEvents")||"[]");e.push(a),sessionStorage.setItem("pendingEvents",JSON.stringify(e))}else{let e=JSON.parse(sessionStorage.getItem("pendingEvents")||"[]");e.push(a),sessionStorage.setItem("pendingEvents",JSON.stringify(e)),console.log("Event saved locally - Google Sheets not configured"),alert("Event saved")}},K=e=>({"Community Service":"#3B82F6",Health:"#10B981",Career:"#F59E0B",Education:"#8B5CF6",Recreation:"#EC4899"})[e]||"#6B7280",Y=()=>{console.log("getUpcomingEvents called. Current events:",t);let e=new Date().toISOString().split("T")[0],n=t.filter(t=>t.date&&""!==t.date.trim()?isNaN(new Date(t.date).getTime())?(console.log("Filtering out event with invalid date:",t.title,t.date),!1):(console.log("Checking event:",t.title,"Event date:",t.date,"Today:",e,"Is upcoming:",t.date>=e),t.date>=e):(console.log("Filtering out event with empty date:",t.title),!1)).sort((e,t)=>e.date.localeCompare(t.date));return console.log("Filtered upcoming events:",n),n},Q=e=>new Date(e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),$=e=>{let[t,n]=e.split(" "),[a,r]=t.split(":"),s=parseInt(a,10);return"PM"===n&&12!==s?s+=12:"AM"===n&&12===s&&(s=0),"".concat(s.toString().padStart(2,"0"),":").concat(r,":00")},ee=e=>{let t={id:e.id,title:e.title,extendedProps:{time:e.time,location:e.location,description:e.description,category:e.category,organizer:e.organizer,link:e.link}};if(e.startTime&&e.endTime){t.start="".concat(e.date,"T").concat($(e.startTime));let n=e.endDate&&e.endDate!==e.date?e.endDate:e.date;t.end="".concat(n,"T").concat($(e.endTime))}else if(e.time&&e.time.includes("-")){let[n,a]=e.time.split(" - ");n&&a?(t.start="".concat(e.date,"T").concat($(n.trim())),t.end="".concat(e.date,"T").concat($(a.trim()))):(t.start="".concat(e.date,"T09:00:00"),t.end="".concat(e.date,"T10:00:00"))}else t.start="".concat(e.date,"T09:00:00"),t.end="".concat(e.date,"T10:00:00");return t};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(s.default,{}),(0,a.jsx)("main",{className:"container mx-auto px-4 pt-20 pb-8",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"relative mb-6",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 flex gap-2",children:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>v(!0),className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 text-sm",children:"Add Event"}),(0,a.jsx)("button",{onClick:()=>{f(!1),sessionStorage.removeItem("calendarAdmin")},className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 text-sm",children:"Logout"})]}):(0,a.jsx)("button",{onClick:()=>N(!0),className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 text-sm",children:"Admin Login"})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-1",children:"Community Events"}),(0,a.jsx)("p",{className:"text-sm md:text-base text-gray-600",children:"Stay connected with what's happening in Robeson County"})]})]}),(0,a.jsx)("div",{className:"mb-6 flex flex-wrap gap-3 justify-center px-4",children:q.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded",style:{backgroundColor:K(e)}}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:e})]},e))}),(0,a.jsxs)("div",{className:"mb-4 flex justify-center gap-2 px-4",children:[(0,a.jsx)("button",{onClick:()=>{F(!0)},className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat(_?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Agenda"}),(0,a.jsx)("button",{onClick:()=>{var t;null==(t=e.current)||t.getApi().changeView("timeGridDay"),P("timeGridDay"),F(!1)},className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("timeGridDay"!==M||_?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-blue-500 text-white"),children:"Day"}),(0,a.jsx)("button",{onClick:()=>{var t;null==(t=e.current)||t.getApi().changeView("timeGridWeek"),P("timeGridWeek"),F(!1)},className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("timeGridWeek"!==M||_?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-blue-500 text-white"),children:"Week"}),(0,a.jsx)("button",{onClick:()=>{var t;null==(t=e.current)||t.getApi().changeView("dayGridMonth"),P("dayGridMonth"),F(!1)},className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("dayGridMonth"!==M||_?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-blue-500 text-white"),children:"Month"})]}),y&&(0,a.jsx)("div",{className:"mb-4 bg-blue-50 border border-blue-200 rounded-lg p-3 text-center",children:(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,a.jsx)("span",{className:"font-medium",children:"Admin Mode:"})," Click on any date to add an event"]})}),_?(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Upcoming Events"}),D?(0,a.jsx)("p",{className:"text-center py-8",children:"Loading events..."}):(0,a.jsxs)("div",{className:"space-y-6",children:[Object.entries((e=>{let t={};return e.forEach(e=>{t[e.date]||(t[e.date]=[]),t[e.date].push(e)}),t})(Y())).map(e=>{let[t,n]=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-3 border-b pb-2",children:Q(t)}),(0,a.jsx)("div",{className:"space-y-3",children:n.map(e=>(0,a.jsxs)("div",{onClick:()=>{p(e),u(!0)},className:"flex items-start gap-3 p-3 hover:bg-gray-50 rounded-lg cursor-pointer transition-colors",children:[(0,a.jsx)("div",{className:"w-1 h-16 rounded-full flex-shrink-0",style:{backgroundColor:K(e.category)}}),(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-800",children:e.title}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:e.time})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,a.jsx)("span",{className:"font-medium",children:"Location:"})," ",e.location]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full text-white",style:{backgroundColor:K(e.category)},children:e.category}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["Organized by ",e.organizer]})]})]})]},e.id))})]},t)}),0===Y().length&&(0,a.jsx)("p",{className:"text-center text-gray-500 py-8",children:"No upcoming events scheduled."})]})]},R):(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-2 md:p-6 ".concat(y?"admin-calendar":""),children:[(0,a.jsx)("style",{children:"\n            .admin-calendar .fc-daygrid-day:hover {\n              background-color: #EFF6FF;\n              cursor: pointer;\n            }\n            .admin-calendar .fc-daygrid-day-frame {\n              min-height: 80px;\n            }\n            /* Style the time grid */\n            .fc-timegrid-slot-label {\n              font-size: 0.875rem;\n              color: #4B5563;\n            }\n            .fc-timegrid-axis {\n              width: 60px;\n            }\n            /* Remove all-day section but keep time labels */\n            .fc-timegrid-all-day-events {\n              display: none !important;\n            }\n            .fc-timegrid-divider {\n              display: none !important;\n            }\n            /* Mobile-specific styles */\n            @media (max-width: 768px) {\n              .fc-toolbar {\n                flex-direction: column;\n                gap: 0.5rem;\n              }\n              .fc-toolbar-title {\n                font-size: 1.1rem;\n              }\n              .fc-button {\n                padding: 0.25rem 0.5rem;\n                font-size: 0.875rem;\n              }\n              .fc-col-header-cell {\n                font-size: 0.75rem;\n              }\n              .fc-daygrid-day-number {\n                font-size: 0.875rem;\n              }\n              .fc-event {\n                font-size: 0.75rem;\n              }\n              .fc-timegrid-slot-label {\n                font-size: 0.7rem;\n              }\n              .fc-timegrid-axis {\n                width: 45px;\n              }\n            }\n          "}),D?(0,a.jsx)("p",{className:"text-center py-8",children:"Loading events..."}):(0,a.jsx)(l.A,{ref:e,plugins:[i.A,o.A,d.Ay],initialView:G?"timeGridDay":"timeGridWeek",events:g,eventClick:e=>{let n=t.find(t=>t.id===e.event.id);n&&(p(n),u(!0))},headerToolbar:{left:"prev,next today",center:"title",right:""},height:G?"calc(100vh - 250px)":"calc(100vh - 350px)",dateClick:y?e=>{U({...B,date:e.dateStr,endDate:e.dateStr}),v(!0)}:void 0,eventColor:"#3B82F6",eventDisplay:"block",selectable:y,slotMinTime:"06:00:00",slotMaxTime:"22:00:00",slotDuration:"00:30:00",slotLabelInterval:"01:00:00",slotLabelFormat:{hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"},allDaySlot:!1,eventContent:e=>{let t=e.event.extendedProps.category,n=e.view.type.includes("timeGrid");return(0,a.jsxs)("div",{className:"p-1 text-xs",style:{backgroundColor:K(t),color:"white",borderRadius:"4px",height:"100%",overflow:"hidden"},children:[(0,a.jsx)("div",{className:"font-semibold truncate",children:e.event.title}),n&&(0,a.jsx)("div",{className:"text-[10px] opacity-90 truncate",children:e.event.extendedProps.location})]})}})]}),y&&sessionStorage.getItem("pendingEvents")&&JSON.parse(sessionStorage.getItem("pendingEvents")||"[]").length>0&&!c.env.NEXT_PUBLIC_GOOGLE_SCRIPT_URL&&(0,a.jsxs)("div",{className:"mt-8 bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"Pending Events (Local Storage)"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:'Google Sheets integration not configured. To enable automatic submission: 1. Follow the instructions in DEPLOY_GOOGLE_SCRIPT.md 2. Add NEXT_PUBLIC_GOOGLE_SCRIPT_URL to your .env.local file To manually add these events: 1. Copy the JSON below 2. Go to your GitHub repository 3. Edit public/events.json 4. Add these events to the "events" array'}),(0,a.jsx)("div",{className:"bg-white rounded border border-gray-200 p-4 font-mono text-xs overflow-x-auto",children:(0,a.jsx)("pre",{children:JSON.stringify(JSON.parse(sessionStorage.getItem("pendingEvents")||"[]"),null,2)})}),(0,a.jsxs)("div",{className:"mt-3 flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(JSON.stringify(JSON.parse(sessionStorage.getItem("pendingEvents")||"[]"),null,2)),alert("Copied")},className:"px-4 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600",children:"Copy to Clipboard"}),(0,a.jsx)("button",{onClick:()=>{sessionStorage.removeItem("pendingEvents"),window.location.reload()},className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Clear Pending"})]})]}),h&&x&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:x.title}),(0,a.jsxs)("div",{className:"space-y-3 text-gray-700",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Date:"})," ",new Date(x.date).toLocaleDateString(),x.endDate&&x.endDate!==x.date?" - ".concat(new Date(x.endDate).toLocaleDateString()):""]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Time:"})," ",x.time]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Location:"})," ",x.location]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Description:"})," ",x.description]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Category:"})," ",x.category]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Organizer:"})," ",x.organizer]}),x.link&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Link:"})," ",(0,a.jsx)("a",{href:(()=>{let e=x.link.trim();return e.match(/^https?:\/\//i)?e:e.startsWith("//")?"https:".concat(e):"https://".concat(e)})(),target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline hover:text-blue-600",onClick:e=>{var t;e.preventDefault();let n=(null==(t=x.link)?void 0:t.trim())||"",a=n;n.match(/^https?:\/\//i)||(a=n.startsWith("//")?"https:".concat(n):"https://".concat(n)),window.open(a,"_blank","noopener,noreferrer")},children:x.link.includes("zoom")?"Join Zoom Meeting":"Event Link"})]})]}),(0,a.jsxs)("div",{className:"mt-6 flex gap-3",children:[y&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>{U({title:x.title,date:x.date,endDate:x.endDate||x.date,time:x.time,startTime:x.startTime||"9:00 AM",endTime:x.endTime||"10:00 AM",location:x.location,description:x.description,category:x.category,organizer:x.organizer,link:x.link||""}),O(!0),A(x.id),u(!1),v(!0)},className:"flex-1 px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>{confirm("Are you sure you want to delete this event?\n\n".concat(x.title))&&(X(x.id),u(!1))},className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:"Delete"})]}),(0,a.jsx)("button",{onClick:()=>u(!1),className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Close"})]})]})}),j&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Admin Login"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Enter the admin password to manage events"}),(0,a.jsx)("input",{type:"password",value:w,onChange:e=>S(e.target.value),onKeyPress:e=>"Enter"===e.key&&V(),placeholder:"Enter password",className:"w-full px-4 py-2 border border-gray-300 rounded-lg mb-2"}),k&&(0,a.jsx)("p",{className:"text-red-500 text-sm mb-4",children:k}),(0,a.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,a.jsx)("button",{onClick:()=>{N(!1),S(""),C("")},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,a.jsx)("button",{onClick:V,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Login"})]})]})}),b&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 overflow-y-auto",children:(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4 md:p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:E?"Edit Event":"Add New Event"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Title"}),(0,a.jsx)("input",{type:"text",value:B.title,onChange:e=>U({...B,title:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,a.jsx)("input",{type:"date",value:B.date,onChange:e=>{let t=e.target.value;if(U({...B,date:t}),t){let e=new Date(t);if(isNaN(e.getTime()))return void L("Invalid date format");if(e.toISOString().split("T")[0]!==t)return void L("Invalid date selected");if(!E&&new Date("".concat(t,"T").concat($(B.startTime||"9:00 AM")))<new Date)return void L("Can't select a past date/time");t>(B.endDate||"")&&U(e=>({...e,endDate:t})),L("")}},min:E?void 0:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 border ".concat(z?"border-red-500":"border-gray-300"," rounded-lg"),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,a.jsx)("input",{type:"date",value:B.endDate||B.date,onChange:e=>{let t=e.target.value,n=new Date(t);isNaN(n.getTime())||n.toISOString().split("T")[0]!==t?t&&L("Invalid end date selected"):(U({...B,endDate:t}),z&&z.includes("end date")&&L(""))},min:B.date,className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0})]})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Time"}),(0,a.jsx)("select",{value:B.startTime,onChange:e=>{let t=e.target.value;if((U({...B,startTime:t}),!E&&B.date===new Date().toISOString().split("T")[0])&&new Date("".concat(B.date,"T").concat($(t)))<new Date)return void L("Can't select a time that has already passed");z&&!z.includes("end time")&&L("")},className:"w-full px-4 py-2 border ".concat(z?"border-red-500":"border-gray-300"," rounded-lg"),required:!0,children:W.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Time"}),(0,a.jsx)("select",{value:B.endTime,onChange:e=>{let t=e.target.value;if((U({...B,endTime:t}),B.date===B.endDate||!B.endDate)&&$(B.startTime||"9:00 AM")>=$(t))return void L("End time must be after start time");z&&z.includes("end time")&&L("")},className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0,children:W.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]})]}),z&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-4 bg-red-100 border-2 border-red-400 rounded-lg text-red-800 animate-pulse",children:[(0,a.jsx)("svg",{className:"w-6 h-6 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,a.jsx)("span",{className:"font-semibold",children:z})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),(0,a.jsx)("input",{type:"text",value:B.location,onChange:e=>U({...B,location:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,a.jsx)("select",{value:B.category,onChange:e=>U({...B,category:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:q.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Organizer"}),(0,a.jsx)("input",{type:"text",value:B.organizer,onChange:e=>U({...B,organizer:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,a.jsx)("textarea",{value:B.description,onChange:e=>U({...B,description:e.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Link (Optional)"}),(0,a.jsx)("input",{type:"url",value:B.link,onChange:e=>U({...B,link:e.target.value}),placeholder:"https://zoom.us/j/123456789 or event website",className:"w-full px-4 py-2 border border-gray-300 rounded-lg"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Add a Zoom link, event website, or registration page"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 justify-end mt-6",children:[(0,a.jsx)("button",{onClick:()=>{v(!1),O(!1),A(null),L(""),U({title:"",date:new Date().toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],time:"",startTime:"9:00 AM",endTime:"10:00 AM",location:"",description:"",category:"Community Service",organizer:"",link:""})},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,a.jsxs)("button",{onClick:Z,disabled:!B.title||!B.startTime||!B.endTime||!B.location||!B.organizer||!B.description||!!z,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed relative group",title:z||"",children:[E?"Update Event":"Add Event",z&&(0,a.jsx)("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1 text-xs text-white bg-gray-800 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:z})]})]})]})})})]})})]})}},5426:(e,t,n)=>{Promise.resolve().then(n.bind(n,4167))}},e=>{var t=t=>e(e.s=t);e.O(0,[18,874,839,441,684,358],()=>t(5426)),_N_E=e.O()}]);