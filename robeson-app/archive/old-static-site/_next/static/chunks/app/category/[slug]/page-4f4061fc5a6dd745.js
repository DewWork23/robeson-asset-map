(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{4607:(e,s,a)=>{Promise.resolve().then(a.bind(a,6226))},6226:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>p});var r=a(5155),t=a(2115),n=a(5695),i=a(6874),l=a.n(i),o=a(3395),c=a(6610),d=a(1808),u=a(7944),m=a(2014),g=a(3853),h=a(3412),x=a(7218);function f(){let e=(0,n.useParams)(),s=(0,n.useRouter)(),a=(0,n.useSearchParams)(),i=e.slug,f=(0,g.f4)(i),{organizations:p,loading:j}=(0,x.G)(),[b,v]=(0,t.useState)([]),[N,y]=(0,t.useState)(""),[w,C]=(0,t.useState)(null),S="voice"===a.get("from"),[k,D]=(0,t.useState)(S?"map":"list"),[E,z]=(0,t.useState)(null);if((0,t.useEffect)(()=>{if(!f)return void s.push("/")},[f,s]),(0,t.useEffect)(()=>{f&&0!==p.length&&v((0,c.T)(p,f,N,w||void 0))},[p,f,N,w]),j)return(0,r.jsx)("main",{className:"min-h-screen bg-gray-50",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto p-4",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),(0,r.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[...Array(6)].map((e,s)=>(0,r.jsx)("div",{className:"h-48 bg-gray-200 rounded-lg"},s))})]})})});if(!f)return null;let O=o.C[f]||"\uD83D\uDCCD";return(0,r.jsxs)("main",{className:"min-h-screen bg-gray-50",children:[(0,r.jsxs)("div",{className:"max-w-7xl mx-auto p-4",children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)(l(),{href:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 hover:shadow-lg focus:outline-none focus:ring-4 focus:ring-blue-500 focus:ring-offset-2 transition-all transform hover:scale-105","aria-label":"Go back to all categories",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),(0,r.jsx)("span",{children:"Back to All Categories"})]})}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[(0,r.jsx)("span",{className:"text-4xl",children:O}),f]}),(0,r.jsxs)("p",{className:"text-gray-600 mt-2",children:[b.length," resources available"]})]}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)(u.A,{searchTerm:N,onSearchChange:y,onNearMe:()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{let{latitude:s,longitude:a}=e.coords;C({lat:s,lon:a}),y("\uD83D\uDCCD Near me")},e=>{console.error("Error getting location:",e),alert("Unable to get your location. Please enable location services.")}):alert("Geolocation is not supported by your browser.")},placeholder:"Search ".concat(f,"...")})}),(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,r.jsx)("div",{className:"text-sm text-gray-600",children:w?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"font-medium",children:"\uD83D\uDCCD Sorted by distance"})," - Showing ",f," nearest to your location first"]}):(0,r.jsxs)(r.Fragment,{children:["Crisis Services"===f&&(0,r.jsx)("span",{className:"font-medium",children:"\uD83D\uDEA8 Crisis services sorted by priority"}),"Crisis Services"!==f&&(0,r.jsxs)("span",{className:"font-medium",children:["Showing ",f," resources"]})]})}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>D("list"),className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("list"===k?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),"aria-pressed":"list"===k,children:(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{children:"\uD83D\uDCCB"})," List"]})}),(0,r.jsx)("button",{onClick:()=>D("map"),className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("map"===k?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),"aria-pressed":"map"===k,children:(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{children:"\uD83D\uDDFAï¸"})," Map"]})})]})]}),"list"===k?(0,r.jsx)("div",{className:"space-y-4",children:b.map(e=>(0,r.jsx)(d.A,{organization:e},e.id))}):(0,r.jsx)("div",{className:"h-[600px] bg-white rounded-lg shadow-sm overflow-hidden",children:(0,r.jsx)(m.default,{organizations:null===E||E===f?b:(0,c.T)(p,E),allOrganizations:p,selectedCategory:E||f,onCategorySelect:e=>{z(e)},onOrganizationClick:e=>{console.log("Organization clicked:",e)}})}),0===b.length&&(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-gray-600",children:"No resources found matching your criteria."})})]}),(0,r.jsx)(h.A,{})]})}function p(){return(0,r.jsx)(t.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),children:(0,r.jsx)(f,{})})}},7218:(e,s,a)=>{"use strict";a.d(s,{G:()=>o,O:()=>l});var r=a(5155),t=a(2115),n=a(6610);let i=(0,t.createContext)(void 0);function l(e){let{children:s}=e,[a,l]=(0,t.useState)([]),[o,c]=(0,t.useState)(!0),[d,u]=(0,t.useState)(null),m=async()=>{try{c(!0),u(null);let e=await (0,n.i)();l(e)}catch(e){u(e instanceof Error?e.message:"Failed to load organizations"),console.error("Error loading organizations:",e)}finally{c(!1)}};return(0,t.useEffect)(()=>{m()},[]),(0,r.jsx)(i.Provider,{value:{organizations:a,loading:o,error:d,refetch:m},children:s})}function o(){let e=(0,t.useContext)(i);if(void 0===e)throw Error("useOrganizations must be used within an OrganizationsProvider");return e}}},e=>{var s=s=>e(e.s=s);e.O(0,[874,610,14,235,441,684,358],()=>s(4607)),_N_E=e.O()}]);