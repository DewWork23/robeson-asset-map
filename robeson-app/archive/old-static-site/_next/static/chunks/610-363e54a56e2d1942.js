"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[610],{896:(e,t,n)=>{n.d(t,{BZ:()=>s,Hy:()=>i});let i=["Crisis Services","Food Services","Housing Services","Healthcare Services","Mental Health & Substance Use","Government Services","Tribal Services","Community Services","Community Groups & Development","Faith-Based Services","Legal Services","Law Enforcement","Education","Pharmacy","Cultural & Information Services"],s={"Healthcare/Treatment":"Healthcare Services","Healthcare/Medical":"Healthcare Services","Healthcare/Public Health":"Healthcare Services","Mental Health":"Mental Health & Substance Use","Government Services":"Government Services","Government/Tribal Services":"Government Services","Government & Tribal Services":"Government Services","Community Services":"Community Services","Community Organizations":"Community Groups & Development","Community Development":"Community Groups & Development","Faith-Based Programs":"Faith-Based Services","Legal Services":"Legal Services","Law Enforcement":"Law Enforcement",Education:"Education","Housing Services":"Housing Services",Pharmacy:"Pharmacy","Cultural Services":"Cultural & Information Services","Labor Union":"Cultural & Information Services","Information/Referral":"Cultural & Information Services","Free Programs":"Community Services","Fee-Based Programs":"Community Services"}},6610:(e,t,n)=>{n.d(t,{T:()=>d,i:()=>u});var i=n(8546),s=n(896);let r="1a6iGXkroz1IeH3O2DNrHi1UqnoCfX6N37eDRtWuySbs",a="AIzaSyA9cwF3iD_dAVqJOtz7NZIhDmAxFqeGAKw",o="robeson_resources_cache_v19";function l(){try{let e=localStorage.getItem(o);if(!e)return null;let t=JSON.parse(e);if(Date.now()-t.timestamp<3e5)return console.log("Using cached data"),t.organizations;return localStorage.removeItem(o),null}catch(e){return console.error("Error reading cache:",e),null}}function c(e){try{let t={organizations:e,timestamp:Date.now()};localStorage.setItem(o,JSON.stringify(t))}catch(e){console.error("Error setting cache:",e)}}async function u(){let e=l();if(e)return e;try{if(!r||!a)return console.warn("Google Sheets credentials not found, falling back to CSV"),console.log("SHEET_ID:",r?"".concat(r.substring(0,8),"..."):"empty"),console.log("API_KEY:",a?"".concat(a.substring(0,8),"..."):"empty"),f();console.log("Fetching fresh data from Google Sheets..."),console.log("Using SHEET_ID:",r.substring(0,8)+"...");let e="https://sheets.googleapis.com/v4/spreadsheets/".concat(r,"/values/").concat("A:P","?key=").concat(a),t=new AbortController,n=setTimeout(()=>t.abort(),3e4),i=await fetch(e,{signal:t.signal,headers:{Accept:"application/json"}});if(clearTimeout(n),!i.ok){let e=await i.text();throw console.error("Google Sheets API error:",e),Error("Failed to fetch data: ".concat(i.statusText))}let s=(await i.json()).values;if(!s||0===s.length)return console.warn("No data found in Google Sheet"),[];console.log("Successfully fetched ".concat(s.length," rows from Google Sheets")),s.length>0&&(console.log("Headers:",s[0]),console.log("Number of columns:",s[0].length));let o=s.slice(1).map((e,t)=>{var n;return{id:(t+1).toString(),organizationName:e[0]||"",category:e[1]||"",serviceType:e[2]||"",address:e[3]||"",latitude:e[4]?parseFloat(e[4]):void 0,longitude:e[5]?parseFloat(e[5]):void 0,phone:e[6]||"",email:e[7]||"",website:e[8]||"",hours:e[9]||"",servicesOffered:e[10]||"",costPayment:e[11]||"",description:e[12]||"",crisisService:(null==(n=e[13])?void 0:n.toLowerCase())==="yes",languages:e[14]||"",specialNotes:e[15]||""}}),l=o.filter(e=>e.latitude&&e.longitude).length,u=o.filter(e=>!e.latitude||!e.longitude).length;return console.log("Organizations with coordinates: ".concat(l,", without: ").concat(u)),c(o),o}catch(e){if(console.error("Error loading organizations from Google Sheets:",e),e instanceof Error&&"AbortError"===e.name){let e=l();if(e)return e}return f()}}async function f(){let e=l();if(e)return e;try{console.log("Loading data from CSV file...");let{withBasePath:e}=await n.e(512).then(n.bind(n,2512)),r=await fetch(e("/consolidated_robeson_migrated.csv")),a=(await r.text()).split("\n").filter(e=>e.trim()),o=[];for(let e=1;e<a.length;e++){let n=function(e){let t=[],n="",i=!1;for(let s=0;s<e.length;s++){let r=e[s];'"'===r?i&&'"'===e[s+1]?(n+='"',s++):i=!i:","!==r||i?n+=r:(t.push(n.trim()),n="")}return t.push(n.trim()),t}(a[e]);if(n.length>=14){var t,i;let r=n[1]||"",a=s.BZ[r]||r;if("Government/Tribal Services"===r){let e=(n[0]||"").toLowerCase(),t=(n[2]||"").toLowerCase(),i=(n[8]||"").toLowerCase();(t.includes("tribal")||e.includes("tribe")||e.includes("tribal")||e.includes("lumbee")||e.includes("indian")||i.includes("tribal"))&&(a="Tribal Services")}if(!s.Hy.includes(a)){let e=(n[8]||"").toLowerCase(),t=(n[0]||"").toLowerCase();a=e.includes("food")||e.includes("meal")||e.includes("pantry")||e.includes("kitchen")||t.includes("food bank")||t.includes("soup kitchen")?"Food Services":e.includes("crisis")||(null==(i=n[11])?void 0:i.toLowerCase())==="yes"?"Crisis Services":"Community Services"}let l={id:e.toString(),organizationName:n[0]||"",category:a,serviceType:n[2]||"",address:n[3]||"",phone:n[4]||"",email:n[5]||"",website:n[6]||"",hours:n[7]||"",servicesOffered:n[8]||"",costPayment:n[9]||"",description:n[10]||"",crisisService:(null==(t=n[11])?void 0:t.toLowerCase())==="yes",languages:n[12]||"",specialNotes:n[13]||""};o.push(l)}else console.warn("Skipping line ".concat(e+1,": insufficient columns (").concat(n.length," found, 14 required)"))}return console.log("Successfully loaded ".concat(o.length," organizations from CSV")),c(o),o}catch(e){return console.error("Error loading organizations from CSV:",e),[]}}function d(e,t,n,s){let r=[...e];if(t&&"All"!==t&&(r="Crisis Services"===t?r.filter(e=>e.crisisService):"Food Services"===t?r.filter(e=>{let t=e.servicesOffered.toLowerCase(),n=e.organizationName.toLowerCase();return!(e.serviceType.toLowerCase().includes("support group")||n.includes("anonymous")||n.includes("al-anon"))&&(t.includes("food")||t.includes("meal")||t.includes("pantry")||t.includes("kitchen")||t.includes("nutrition")||t.includes("feeding")||n.includes("food bank")||n.includes("soup kitchen"))}):"Healthcare Services"===t?r.filter(e=>!e.serviceType.toLowerCase().includes("support group")&&(e.category===t||!!e.crisisService&&"Crisis Services"===e.category&&["Hospital/Medical Services","Healthcare","Medical Services","Comprehensive Health Services","Integrated Healthcare","Public Health Services"].includes(e.serviceType))):r.filter(e=>e.category===t||!!e.crisisService&&"Crisis Services"===e.category&&({"Police Services":"Law Enforcement","Sheriff Services":"Law Enforcement","Mental Health Services":"Mental Health & Substance Use","Substance Abuse Treatment":"Mental Health & Substance Use","Mental Health/Addiction":"Mental Health & Substance Use","Mental Health/Developmental Services":"Mental Health & Substance Use","Mental Health/Substance Abuse":"Mental Health & Substance Use","Addiction Medicine":"Mental Health & Substance Use","Behavioral Health/Medical":"Mental Health & Substance Use","Behavioral Health/Peer Support":"Mental Health & Substance Use","Opioid Treatment":"Mental Health & Substance Use","Opioid Recovery":"Mental Health & Substance Use","Substance Abuse Prevention/Recovery":"Mental Health & Substance Use","Substance Use Prevention/Recovery":"Mental Health & Substance Use","Youth Substance Abuse Prevention":"Mental Health & Substance Use","Therapeutic Foster Care/Behavioral Health":"Mental Health & Substance Use",Healthcare:"Healthcare Services","Medical Services":"Healthcare Services","Hospital/Medical Services":"Healthcare Services","Comprehensive Health Services":"Healthcare Services","Integrated Healthcare":"Healthcare Services","Public Health Services":"Healthcare Services","Tribal Services":"Tribal Services","Municipal Services":"Government Services","Social Services":"Government Services","Legal Services":"Legal Services","Legal/Prosecution":"Legal Services","Drug Court":"Legal Services","Child Advocacy":"Legal Services","Support Services":"Community Services","Community Services":"Community Services","Crisis Services":"Community Services","Support Group":"Community Services","Harm Reduction":"Community Services","Mobile Harm Reduction":"Community Services","Biopsychosocial Support":"Community Services","Community Resilience":"Community Services","Disaster Recovery":"Community Services","Disaster Relief/Humanitarian":"Community Services","Healing/Educational Resources":"Community Services","Inclusive Community Support":"Community Services","Opioid Crisis Prevention":"Community Services","Offender Rehabilitation":"Community Services","Resource Gap Bridging":"Community Services","Equine-Assisted Learning":"Community Services","Faith-Based Services":"Faith-Based Services","Faith-Based Recovery":"Faith-Based Services"})[e.serviceType]===t)),n&&!s){let e=n.toLowerCase();r=r.filter(t=>t.organizationName.toLowerCase().includes(e)||t.servicesOffered.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)||t.address.toLowerCase().includes(e))}return s?(r=r.map(e=>{let t=(0,i.Of)(e.address);if(t){let n=(0,i.gd)(s.lat,s.lon,t.lat,t.lon);return{...e,distance:n}}return e})).sort((e,t)=>void 0===e.distance?1:void 0===t.distance?-1:e.distance-t.distance):r.sort((e,t)=>e.crisisService&&!t.crisisService?-1:!e.crisisService&&t.crisisService?1:0),"Crisis Services"===t&&r.sort((e,t)=>{let n=e=>{let t=e.organizationName.toLowerCase();return t.includes("suicide prevention")||"suicide prevention hotline"===t?1:t.includes("crisis text line")?2:t.includes("crisis intervention")?3:t.includes("unc health southeastern")?4:t.includes("sheriff")?5:t.includes("police department")?20:t.includes("domestic violence")?6:t.includes("sexual assault")?7:t.includes("southeastern integrated care")?8:t.includes("life net services")?9:t.includes("monarch")?10:t.includes("carter clinic")?11:t.includes("lumberton treatment center")?12:t.includes("harm reduction")?13:t.includes("breeches buoy")?14:t.includes("tae's pathway")?15:t.includes("stop the pain")?16:t.includes("hope alive")?17:t.includes("christian recovery")?18:19},i=n(e),s=n(t);return i===s?void 0!==e.distance&&void 0!==t.distance?e.distance-t.distance:0:i-s}),r}},8546:(e,t,n)=>{function i(e,t,n,i){let r=s(n-e),a=s(i-t),o=Math.sin(r/2)*Math.sin(r/2)+Math.cos(s(e))*Math.cos(s(n))*Math.sin(a/2)*Math.sin(a/2);return 2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))*3959}function s(e){return Math.PI/180*e}n.d(t,{BO:()=>u,JE:()=>l,Of:()=>c,gd:()=>i,nr:()=>r});let r={pembroke:{lat:34.6807,lon:-79.1953},uncp:{lat:34.6874,lon:-79.2025},lumberton:{lat:34.6182,lon:-79.0086},"north lumberton":{lat:34.64,lon:-79.0086},"south lumberton":{lat:34.5964,lon:-79.0086},"east lumberton":{lat:34.6182,lon:-78.9868},"west lumberton":{lat:34.6182,lon:-79.0304},fairmont:{lat:34.496,lon:-79.1142},maxton:{lat:34.7352,lon:-79.3489},"red springs":{lat:34.8152,lon:-79.1831},"st. pauls":{lat:34.8068,lon:-78.9728},"st pauls":{lat:34.8068,lon:-78.9728},rowland:{lat:34.5368,lon:-79.2917},parkton:{lat:34.9018,lon:-79.0117},shannon:{lat:34.893,lon:-79.1176},orrum:{lat:34.4652,lon:-79.0097},fayetteville:{lat:35.0527,lon:-78.8784},raeford:{lat:34.9777,lon:-79.2242},laurinburg:{lat:34.7741,lon:-79.4628},default:{lat:34.64,lon:-79.11}},a={highway:{latOffset:.02,lonOffset:0},hwy:{latOffset:.02,lonOffset:0},route:{latOffset:.02,lonOffset:0},interstate:{latOffset:.03,lonOffset:0},north:{latOffset:.015,lonOffset:0},south:{latOffset:-.015,lonOffset:0},east:{latOffset:0,lonOffset:.015},west:{latOffset:0,lonOffset:-.015},ne:{latOffset:.011,lonOffset:.011},nw:{latOffset:.011,lonOffset:-.011},se:{latOffset:-.011,lonOffset:.011},sw:{latOffset:-.011,lonOffset:-.011},main:{latOffset:0,lonOffset:0},elm:{latOffset:.005,lonOffset:.003},oak:{latOffset:-.003,lonOffset:.005},pine:{latOffset:.004,lonOffset:-.004},"martin luther king":{latOffset:.008,lonOffset:0},mlk:{latOffset:.008,lonOffset:0},"1st":{latOffset:-.008,lonOffset:-.008},"2nd":{latOffset:-.006,lonOffset:-.006},"3rd":{latOffset:-.004,lonOffset:-.004},"4th":{latOffset:-.002,lonOffset:-.002},"5th":{latOffset:0,lonOffset:0}},o=new Map;function l(){o.clear()}function c(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.toLowerCase();if(!e||""===e.trim())return null;let i=null,s=null,l=e.split(",");if(l.length>=2){var c;let e=null==(c=l[l.length-2])?void 0:c.trim().toLowerCase();for(let[t,n]of Object.entries(r))if("default"!==t&&e&&e.includes(t)){i={...n},s=t;break}}if(!i){for(let[t,n]of Object.entries(r))if("default"!==t)if("fayetteville"===t||"raeford"===t||"laurinburg"===t){let r=RegExp("\\b".concat(t,"\\s*(,\\s*)?(nc|north carolina)\\b"),"i"),a=RegExp("\\b".concat(t,"\\s+(road|rd|street|st|avenue|ave|boulevard|blvd|drive|dr|lane|ln|way|court|ct|place|pl)\\b"),"i");if(r.test(e)&&!a.test(e)){i={...n},s=t;break}}else{let r=RegExp(",\\s*".concat(t,"\\b"),"i"),a=RegExp("\\b".concat(t,"\\s*(,\\s*)?(nc|north carolina)?\\s*\\d*$"),"i");if(r.test(e)||a.test(e)){i={...n},s=t;break}}}!i&&(n.includes("university of north carolina")||n.includes("uncp"))&&(i={...r.uncp},s="uncp"),i?console.log('Matched "'.concat(e,'" to ').concat(s)):(i={...r.default},console.log('No city match found for address: "'.concat(e,'", defaulting to county center')));let u=e.match(/^(\d+)\s+/);if(u){let e=parseInt(u[1]);i.lat+=e%100*1e-5,i.lon+=e%50*1e-5}for(let[t,s]of Object.entries(a))if(n.includes(t)){i.lat+=s.latOffset,i.lon+=s.lonOffset,console.log('Applied street pattern offset for "'.concat(t,'" in "').concat(e,'"'));break}"lumberton"===s&&!n.includes("pembroke")&&(n.includes("fayetteville road")||n.includes("fayetteville rd")?i.lat+=.025:n.includes("elizabethtown")?i.lat-=.02:n.includes("5th")&&(i.lon-=.015));let f="".concat(s||"default","_").concat(Math.round(1e4*i.lat),"_").concat(Math.round(1e4*i.lon));o.has(f)||o.set(f,0);let d="".concat(f,"::").concat(e.toLowerCase().trim()),v=0,h=0;for(let[e,t]of o.entries())e.startsWith(f+"::")&&(h++,e===d&&(v=t));if(o.has(d)||(v=h,o.set(d,v)),v>0){let e=2*Math.PI/Math.max(8,h)*v,n=(t?3e-4:2e-4)*(1+.5*Math.floor(v/8));i.lat+=n*Math.cos(e),i.lon+=n*Math.sin(e)*1.2}return i}function u(e){return e<.1?"Less than 0.1 miles":e<1?"".concat(e.toFixed(1)," miles"):"".concat(Math.round(e)," miles")}}}]);